{"version":3,"file":"graphjs.min.js","sources":["../../src/canvas/setupHiDefCanvas.js","../../src/canvas/Renderer.js","../../src/geometry/Vector.js","../../src/geometry/Geometry.js","../../src/graph/Link.js","../../src/graph/Node.js","../../src/graph/Graph.js","../../src/layout/ForceDirected.js","../../src/shape/Constants.js","../../src/shape/Shape.js","../../src/shape/Arc.js","../../src/shape/Circle.js","../../src/shape/Rectangle.js","../../src/InputDeviceTracker.js","../../src/MChart.js","../../src/geometry/Trigo.js","../../src/index.js"],"sourcesContent":["/**\n * Create a High Definition Canvas.\n *\n * @param {*} canvas\n * @returns Scaled 2d Context\n */\nexport default function setupHiDefCanvas(canvas) {\n\t// Get the device pixel ratio, falling back to 1.\n\tvar devicePixelRatio = window.devicePixelRatio || 1;\n\n\tvar ctx = canvas.getContext(\"2d\");\n\n\tconsole.log(\"─────────────────────────\")\n\tconsole.log(\"│ setupHiDefCanvas      │\")\n\tconsole.log(\"─────────────────────────\")\n\tconsole.log(\"  devicePixelRatio : \" + devicePixelRatio)\n\tconsole.log(\"  canvas.width  : \" + canvas.width)\n\tconsole.log(\"  canvas.height : \" + canvas.height)\n\n\t// Get the size of the canvas in CSS pixels.\n\tvar rect = canvas.getBoundingClientRect();\n\tconsole.log(\"  rect.width  : \" + rect.width)\n\tconsole.log(\"  rect.height : \" + rect.height)\n\n    const initialWidth = canvas.width;\n    const initialHeight = canvas.height;\n\n\n\t// On Hi Def like Retina display we double the size of the canvas\n\tcanvas.width = initialWidth * devicePixelRatio;\n\tcanvas.height = initialHeight * devicePixelRatio;\n    ctx.scale(devicePixelRatio, devicePixelRatio);\n\n\t// and we shrink the display size using CSS\n\tcanvas.style.width = initialWidth + 'px';\n    canvas.style.height = initialHeight + 'px';\n\n\tconsole.log(\"  canvas.style.width  : \" + canvas.style.width)\n\tconsole.log(\"  canvas.style.height  : \" + canvas.style.height)\n\n\tconsole.log(\"  canvas.width  : \" + canvas.width)\n\tconsole.log(\"  canvas.height : \" + canvas.height)\n\n\tconsole.log(\" └───────────────────────┘\")\n\n\treturn ctx;\n}","\n\nexport default class Renderer {\n\n    constructor(ctx) {\n        this.ctx = ctx;\n    }\n\n    drawGrid(w, h) {\n\n        this.ctx.save()\n\n        this.ctx.fillStyle = 'white'\n        this.ctx.fillRect(0, 0, w, h)\n        this.ctx.lineWidth = 0.3;\n        this.ctx.strokeStyle = 'lightgray'\n        this.ctx.fillStyle = 'black'\n\n        for (let i = 1; i < w; i++) {\n            this.ctx.beginPath()\n            if (i % 10 === 0) {\n                this.ctx.moveTo(i, 0);\n                this.ctx.lineTo(i, h)\n                this.ctx.moveTo(i, 0);\n            }\n            this.ctx.closePath()\n            this.ctx.stroke()\n        }\n\n        for (let i = 1; i < h; i++) {\n            this.ctx.beginPath()\n            if (i % 10 === 0) {\n                this.ctx.moveTo(0, i)\n                this.ctx.lineTo(w, i)\n                this.ctx.moveTo(0, i)\n            }\n            this.ctx.closePath()\n            this.ctx.stroke()\n        }\n\n\n        this.ctx.lineWidth = 1\n        this.ctx.strokeStyle = 'gray'\n\n        this.ctx.beginPath()\n        for (let i = 50; i < w; i += 10) {\n            if (i % 50 === 0) {\n                this.ctx.moveTo(i, 0)\n                this.ctx.lineTo(i, 30)\n                this.ctx.fillText(` ${i}`, i, 30)\n            } else {\n                this.ctx.moveTo(i, 0)\n                this.ctx.lineTo(i, 10)\n            }\n\n        }\n        this.ctx.closePath()\n        this.ctx.stroke()\n\n        this.ctx.beginPath()\n        for (let i = 50; i < h; i += 10) {\n            if (i % 50 === 0) {\n                this.ctx.moveTo(0, i)\n                this.ctx.lineTo(30, i)\n                this.ctx.fillText(` ${i}`, 30, i)\n            } else {\n                this.ctx.moveTo(0, i)\n                this.ctx.lineTo(10, i)\n            }\n\n        }\n        this.ctx.closePath()\n        this.ctx.stroke()\n\n        this.ctx.restore()\n    }\n}","/**\n *  A vector is an entity that has both magnitude and direction.\n *  2D vector implementation based on the vector functions in P5.js\n */\n export class Vector {\n\tconstructor(x, y) {\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\n\t\tif (isNaN(x) || isNaN(y)) {\n\t\t\tconsole.warn(`Vector(): parameters are not number: (${x}), ${y} `);\n\t\t}\n\t}\n\n\tstatic add(v1, v2) {\n\t\treturn new Vector(v1.x + v2.x, v1.y + v2.y);\n\t}\n\n\t/**\n\t * Divides a vector by a scalar and returns a new vector.\n\t *\n\t * @method div\n\t * @static\n\t * @param  {Vector} v\n\t * @param  {Number}  n\n\t * @return  {Vector}\n\t */\n\tstatic div(v, n) {\n\t\tlet result = v.copy();\n\t\treturn result.div(n);\n\t}\n\n\t/**\n\t * Linear interpolate the vector to another vector\n\t */\n\tstatic lerp(v1, v2, amount) {\n\t\tlet result = v1.copy();\n\t\treturn result.lerp(v2, amount);\n\t}\n\n\tstatic random(min, max) {\n\t\tlet x = randomIntBounds(min, max);\n\t\tlet y = randomIntBounds(min, max);\n\t\treturn new Vector(x, y);\n\t}\n\n\tstatic sub(v1, v2) {\n\t\treturn new Vector(v1.x - v2.x, v1.y - v2.y);\n\t}\n\n\t/**\n\t * Supports adding a Vector or a Scalar\n\t * @param {*} n\n\t * @returns\n\t */\n\tadd(n) {\n\t\tif (n instanceof Vector) {\n\t\t\tthis.x += n.x;\n\t\t\tthis.y += n.y;\n\t\t\treturn this;\n\t\t} else if (typeof n === \"number\") {\n\t\t\tthis.x += n;\n\t\t\tthis.y += n;\n\t\t\treturn this;\n\t\t} else {\n\t\t\tconsole.error(`Parameter in Vector.add(n) Not supported: ${n})`);\n\t\t}\n\t}\n\n\t/**\n\t * Return a copy of this Vector\n\t * @returns\n\t */\n\tcopy() {\n\t\treturn new Vector(this.x, this.y);\n\t}\n\n\t/**\n\t * Divide vector length (ie magnitude) by a constant  \n\t */ \n\tdiv(n) {\n\t\tif (n === 0) {\n\t\t\t//console.warn(\"Vector.div:\", \"divide by 0\");\n\t\t\treturn this;\n\t\t}\n\t\tthis.x /= n;\n\t\tthis.y /= n;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Linear Interpolation\n\t */ \n\tlerp(v1, amount) {\n\t\tthis.x += (v1.x - this.x) * amount || 0;\n\t\tthis.y += (v1.y - this.y) * amount || 0;\n\t\treturn this;\n\t}\n\t/**\n\t * Returns the direction of the Vector\n\t * @returns \n\t */\n\theading() {\n\t\tconst h = Math.atan2(this.y, this.x);\n\t\treturn h;\n\t}\n\n\tmagSq() {\n\t\tconst x = this.x;\n\t\tconst y = this.y;\n\t\treturn x * x + y * y;\n\t}\n\n\tmag() {\n\t\treturn Math.sqrt(this.magSq());\n\t}\n\n\tnormalize() {\n\t\treturn this.div(this.mag());\n\t}\n\n\t/**\n\tMultiply vector length (ie magnitude) by a constant\n\t*/\n\tmult(n) {\n\t\tif (isNaN(n)) {\n\t\t\tconsole.error(`Vector.mult: parameter is not a number: (${n})`);\n\t\t}\n\t\tthis.x *= n;\n\t\tthis.y *= n;\n\t\treturn this;\n\t}\n\n\t/**\n\t *  set magnitude to a given value\n\t */\n\tsetMag(n) {\n\t\treturn this.normalize().mult(n);\n\t}\n\n\n\t/**\n\t * Substracts either a Vector or a scalar\n\t * @param {*} n \n\t * @returns \n\t */\n\tsub(n) {\n\t\tif (n instanceof Vector) {\n\t\t\tthis.x -= n.x;\n\t\t\tthis.y -= n.y;\n\t\t\treturn this;\n\t\t} else if (typeof n === \"number\") {\n\t\t\tthis.x -= n;\n\t\t\tthis.y -= n;\n\t\t\treturn this;\n\t\t} else {\n\t\t\tconsole.error(`Parameter in Vector.sub(n) Not supported: ${n})`);\n\t\t}\n\t}\n\n\ttoString() {\n\t\treturn \"[\" + this.x + \", \" + this.y + \"]\";\n\t}\n}\n\n/* Return a random integer between min and max (inclusive) */\nfunction randomIntBounds(min, max) {\n\treturn Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport default Vector;","\n export function rectContainsShape(rectangle, shape) {\n\tif (shape.type == \"Circle\") {\n\t\treturn rectContainsCircle(rectangle, shape);\n\t} else if (shape.type == \"Rectangle\") {\n\t\treturn rectContainsRect(rectangle, shape);\n\t} else {\n\t\tconsole.error(\"rectContainsShape: shape is unknown: \" + shape);\n\t\tconsole.error( shape);\n\t}\n}\n\n/**\n *\n *\n *    x,y\n *    ┌────────────────────────┐ width\n *    │  x,y             width │\n *    │  ┌──────────────────┐  │\n *    │  │                  │  │\n *    │  │                  │  │\n *    │  │                  │  │\n *    │  └──────────────────┘  │\n *    │                  heigth│\n *    └────────────────────────┘ heigth\n\n * @param {*} rect1 \n * @param {*} rect2 \n * @returns \n */\n/*\n function rectContainsRect(rect1, rect2) {\n\tconsole.log(\"rectContainsRect\");\n\t// console.log(rect1.toStringCoordinates());\n\t// console.log(rect2.toStringCoordinates());\n\n\tvar result_X =\n\t\trect1.getX() < rect2.getX() &&\n\t\trect1.getX() + rect1.getWidth() < rect2.getX() + rect2.getWidth();\n\n\tvar result_Y =\n\t\trect1.getY() > rect2.getY() &&\n\t\trect1.getY() + rect1.getHeight() <= rect2.getY() + rect2.getHeight();\n\n\treturn result_X & result_Y;\n}\n*/\n\nfunction rectContainsRect(rect1, rect2) {\n\tvar result_X =\n\t\trect1.x < rect2.x && rect1.x + rect1.width > rect2.x + rect2.width;\n\n\tvar result_Y =\n\t\trect1.y < rect2.y && rect1.y + rect1.height > rect2.y + rect2.height;\n\n\treturn result_X & result_Y;\n}\n\n\n\n\n\nfunction rectContainsCircle(rectangle, circle) {\n\t// LEFT\n\tvar left_include = rectangle.x < circle.x - circle.radius;\n\tif (!left_include) {\n\t\t//circle is outside of the rectangle on the left side\n\t\treturn false;\n\t}\n\t// RIGHT\n\tvar right_include =\n\t\trectangle.x + rectangle.width > circle.x + circle.radius;\n\tif (!right_include) {\n\t\t//circle is outside of the rectangle on the right side\n\t\treturn false;\n\t}\n\t// BOTTOM\n\tvar bottom_include =\n\t\trectangle.y + rectangle.height > circle.y + circle.radius;\n\tif (!bottom_include) {\n\t\t//circle is outside of the rectangle on the bottom side\n\t\treturn false;\n\t}\n\t// TOP:\n\tvar top_include = rectangle.y < circle.y - circle.radius;\n\tif (!top_include) {\n\t\t//circle is outside of the rectangle on the top side\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n","export default class Link {\n\tconstructor(source, target) {\n\t\tif (source.id && target.id) {\n\t\t\tthis.id = source.id + \" → \" + target.id;\n\t\t} else {\n\t\t\tthis.id = source + \" → \" + target;\n\t\t}\n\t\tthis.source = source;\n\t\tthis.target = target;\n\t}\n}\n","import Vector from \"../geometry/Vector\";\n\n\nexport default class Node {\n\tconstructor(id, data) {\n\t\tthis.id = id;\n\n\t\tthis.data = data;\n\t\tthis.level = 0;\n\t\tthis.children = [];\n\t\tthis.parent;\n\t\tthis.neighbor;\n\t\tthis.isCollapsed = false;\n\n\t\tthis.size = 20;\n\t\tthis.mass = 13; //(6 * this.size) / 1.5;\n\t\tthis.radius = this.size;\n\n\t\tthis.pos = new Vector(0, 0);\n\t\tthis.velocity = new Vector(0, 0);\n\t\tthis.acceleration = new Vector(0, 0);\n\t}\n\n\ttoString() {\n\t\treturn \"Node \" + this.id + \"(\" + this.pos.x + \", \" + this.pos.y + \")\";\n\t}\n\n\taddChild(node) {\n\t\tthis.children.push(node);\n\t}\n\n\tgetAdjacents() {\n\t\treturn this.children;\n\t}\n\n\tisAdjacent(node) {\n\t\treturn this.children.indexOf(node) > -1;\n\t}\n\n\tgetChildAt(i) {\n\t\treturn this.children[i];\n\t}\n\n\tgetFirstChild() {\n\t\treturn this.getChildAt(0);\n\t}\n\n\tgetChildrenCount() {\n\t\treturn this.children.length;\n\t}\n\tisLeaf() {\n\t\treturn this.children && this.children.length == 0;\n\t}\n\thasChild() {\n\t\treturn this.children && this.children.length > 0;\n\t}\n\tgetLastChild() {\n\t\treturn this.getChildAt(this.getChildrenCount() - 1);\n\t}\n\tisAncestorCollapsed() {\n\t\tif (this.parent == null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.parent.isCollapsed\n\t\t\t? true\n\t\t\t: this.parent.id === -1\n\t\t\t? false\n\t\t\t: this.parent.isAncestorCollapsed();\n\t}\n\n\t/**\n\t *  isLeftMost: is this node == to the first child of its parent?\n\t */\n\tisLeftMost() {\n\t\tif (!this.parent || this.parent === null) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn this.parent.getFirstChild() === this;\n\t\t}\n\t}\n\n\t/**\n\t *  isRightMost: is this node == to the last child of its parent?\n\t */\n\tisRightMost() {\n\t\tif (!this.parent || this.parent === null) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn this.parent.getLastChild() === this;\n\t\t}\n\t}\n\n\tgetLeftSibling() {\n\t\tif (this.parent === null || this.isLeftMost()) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tvar index = this.parent.children.indexOf(this);\n\t\t\treturn this.parent.children[index - 1];\n\t\t}\n\t}\n\n\tgetRightSibling() {\n\t\tif (this.parent === null || this.isRightMost()) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tvar index = this.parent.children.indexOf(this);\n\t\t\treturn this.parent.children[index + 1];\n\t\t}\n\t}\n\n\tgetLeftMostChild() {\n\t\tif (this.getChildrenCount() == 0) return null;\n\n\t\treturn this.children[0];\n\t}\n\n\tgetRightMostChild() {\n\t\tif (this.getChildrenCount() == 0) return null;\n\n\t\treturn this.children[this.getChildrenCount() - 1];\n\t}\n\n\thasLeftSibling() {\n\t\treturn !this.isLeftMost();\n\t}\n}\n","// =============================================================\n//                          Graph\n// =============================================================\nimport Link from \"./Link\";\nimport Node from \"./Node\";\n\nexport default class Graph {\n\tconstructor() {\n\t\tthis.graph = {};\n\t\tthis.nodeList = [];\n\t\tthis.linkList = [];\n\t\tthis.adjacency = {};\n\t\tthis.changed = false;\n\t\tthis.root;\n\t}\n\n\t/**\n\t * Add a node\n\t * @param {*} node\n\t * @returns\n\t */\n\taddNode(node) {\n\t\tif (!(node.id in this.graph)) {\n\t\t\tthis.nodeList.push(node);\n\t\t\tthis.graph[node.id] = node;\n\t\t} else {\n\t\t\tconsole.log(\"Node already exists: \" + node.id);\n\t\t}\n\t\treturn node;\n\t}\n\tgetNode(nodeID) {\n\t\tvar node = this.graph[nodeID];\n\t\treturn node;\n\t}\n\n\tnodeAt(index) {\n\t\tvar node = this.nodeList[index];\n\t\treturn node;\n\t}\n\n\t/**\n\t *  Add an object. Create a node from the specified object\n\t * @param {*} object\n\t * @returns\n\t */\n\taddObject(object) {\n\t\tvar node = new Node(object.id, object);\n\n\t\tif (object.parentId) {\n\t\t\tnode.parent = this.getNode(object.parentId);\n\t\t\tif (!node.parent) {\n\t\t\t\tconsole.error(\n\t\t\t\t\t\"Parent node not found for parentId: \" + object.parentId\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tnode.level = node.parent.level + 1;\n\t\t\t\tnode.parent.children.push(node);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.root = node;\n\t\t}\n\t\tthis.addNode(node);\n\t\tthis.changed = true;\n\t\treturn node;\n\t}\n\n\tgetLinkCount() {\n\t\treturn this.linkList.length;\n\t}\n\tgetNodeCount() {\n\t\treturn this.nodeList.length;\n\t}\n\n\taddLink(sourceNode_id, targetNode_id) {\n\t\tvar sourceNode = this.getNode(sourceNode_id);\n\t\tif (sourceNode == undefined) {\n\t\t\tthrow new TypeError(\n\t\t\t\t\"Trying to add a link to the non-existent node with id: \" +\n\t\t\t\tsourceNode_id\n\t\t\t);\n\t\t}\n\t\tvar targetNode = this.getNode(targetNode_id);\n\t\tif (targetNode == undefined) {\n\t\t\tthrow new TypeError(\n\t\t\t\t\"Trying to add a link to the non-existent node with id: \" +\n\t\t\t\ttargetNode_id\n\t\t\t);\n\t\t}\n\n\t\tvar link = new Link(sourceNode, targetNode);\n\t\tvar exists = false;\n\n\t\tthis.linkList.forEach(function (item) {\n\t\t\tif (link.id === item.id) {\n\t\t\t\texists = true;\n\t\t\t}\n\t\t});\n\n\t\tif (!exists) {\n\t\t\tthis.linkList.push(link);\n\t\t\tsourceNode.addChild(targetNode);\n\t\t} else {\n\t\t\tconsole.log(\n\t\t\t\t\"LINK EXIST: \" +\n\t\t\t\t\" source: \" +\n\t\t\t\tlink.source.id +\n\t\t\t\t\" => \" +\n\t\t\t\tlink.target.id\n\t\t\t);\n\t\t}\n\n\t\tif (!(link.source.id in this.adjacency)) {\n\t\t\tthis.adjacency[link.source.id] = {};\n\t\t}\n\t\tif (!(link.target.id in this.adjacency[link.source.id])) {\n\t\t\tthis.adjacency[link.source.id][link.target.id] = [];\n\t\t}\n\t\tthis.adjacency[link.source.id][link.target.id].push(link);\n\t}\n\n\t/**\n\t *  JSON input can be either a JSON String or a JSON object\n\t * @param {*} json_input\n\t */\n\tloadJSON(json_input) {\n\t\tconsole.log(\"Graph.loadJSON: json_string: \");\n\t\tconsole.log(json_input);\n\t\tvar json_object ;\n\t\tif (typeof json_string === \"string\") {\n\t\t\tconsole.log(\"Graph.loadJSON: input is of type string: \");\n\t\t\tjson_object = JSON.parse(json_input);\n\n\t\t}\n\t\telse if (typeof json_string === \"object\") {\n\t\t\tconsole.log(\"Graph.loadJSON: input is of type object: \");\n\t\t\tjson_object = json_input;\n\t\t}\n\n\t\tvar nodes = json_object[\"nodes\"];\n\t\tfor (let index = 0; index < nodes.length; index++) {\n\t\t\tvar node = nodes[index];\n\t\t\tthis.addObject(node);\n\t\t}\n\n\t\tvar links = json_object[\"links\"];\n\t\tif (links) {\n\t\t\tfor (let index = 0; index < links.length; index++) {\n\t\t\t\tvar link = links[index];\n\t\t\t\tthis.addLink(link.source, link.target);\n\t\t\t}\n\t\t}\n\t\tconsole.log(\"Graph.loadJSON:  loaded Graph=\");\n\t\tconsole.log(this.graph);\n\t}\n\n\n\ttoString() {\n\t\treturn this.nodeList.map(printNode);\n\t}\n}\n\nfunction printNode(node) {\n\tvar adjacentsRepresentation = \"\";\n\tif (node.getAdjacents() == 0) {\n\t\tadjacentsRepresentation = \"no children\";\n\t} else {\n\t\tadjacentsRepresentation = node\n\t\t\t.getAdjacents()\n\t\t\t.map(function (item) {\n\t\t\t\treturn item.id;\n\t\t\t})\n\t\t\t.join(\", \");\n\t}\n\treturn node.id + \" => \" + adjacentsRepresentation;\n}\n","// =============================================================\n// Force Directed Layout\n// =============================================================\nimport Vector from \"../geometry/Vector\";\n\nexport default class ForceDirected extends GraphLayout {\n\tconstructor(graph, options) {\n\t\tthis.graph = graph;\n\t\tthis.initNodes();\n\n\t\tconst DEFAULTS = {\n\t\t\tGRAVITY: 0.9,\n\t\t\tREPULSION: 500000,\n\t\t};\n\t\tthis.options = Object.assign({}, DEFAULTS, options);\n\t}\n\n\tinitNodes() {\n\t\tlet min = -1000;\n\t\tlet max = 1000;\n\n\t\tthis.graph.nodeList.forEach((node) => {\n\t\t\tnode.pos = new Vector.random(min, max);\n\t\t});\n\t}\n\n\trun() {\n\t\t//requestAnimationFrame(this.animate);\n\t\tconsole.log(\"run\");\n\t}\n\n\tanimate = () => {\n\t\tconsole.log(\"animate\");\n\t};\n\n\t/**\n\t *  applyForce\n\t *\n\t *  Newton’s second law.\n\t *  Receive a force, divide by mass, and add to acceleration.\n\t */\n\tapplyForce(node, force) {\n\t\tlet forceOverMass = Vector.div(force, node.mass);\n\t\tnode.acceleration.add(forceOverMass);\n\t}\n\n\tupdateNodesVelocity() {\n\t\tthis.graph.nodeList.forEach((node) => {\n\t\t\tlet force_copy = node.acceleration.copy();\n\t\t\tlet forceOverMass = force_copy.div(node.mass);\n\t\t\t//\tnode.velocity.add( forceOverMass );\n\t\t\tnode.pos.add(forceOverMass);\n\n\t\t\t//\tnode.velocity.add(node.acceleration);\n\t\t\t//\tnode.pos.add(node.velocity);\n\t\t\t//\tnode.acceleration.mult(0);\n\t\t});\n\t}\n\n\tapplyForcesTowardsCenter() {\n\t\t// apply force towards center\n\t\tthis.graph.nodeList.forEach((node) => {\n\t\t\tlet gravity = node.pos.copy().mult(-1).mult(this.options.GRAVITY);\n\t\t\tnode.acceleration = gravity;\n\t\t\t//node.applyForce(gravity);\n\t\t\t//console.log(node);\n\t\t});\n\t}\n\n\tapplyRepulsiveForces() {\n\t\t// apply repulsive force between nodes\n\t\tfor (let i = 0; i < this.graph.nodeList.length; i++) {\n\t\t\tfor (let j = i + 1; j < this.graph.nodeList.length; j++) {\n\t\t\t\tif (i != j) {\n\t\t\t\t\tlet node1 = this.graph.nodeList[i];\n\t\t\t\t\tlet node2 = this.graph.nodeList[j];\n\t\t\t\t\t//console.log(\"applyRepulsiveForces\");\n\t\t\t\t\t//console.log(node1);\n\t\t\t\t\t//console.log(node2);\n\n\t\t\t\t\t// The gravitational force F between two bodies of mass m1 and m2 is\n\t\t\t\t\t// F = G*m1*m2 / r2\n\t\t\t\t\t// the vector that points from one object to the other\n\t\t\t\t\tlet dir = Vector.sub(node2.pos, node1.pos);\n\t\t\t\t\t// let unit = dir.copy().normalize()\n\n\t\t\t\t\t// the length (magnitude) of that vector is the distance between the two objects.\n\t\t\t\t\tlet distance = dir.mag();\n\n\t\t\t\t\t// The strength of the force is inversely proportional to the distance squared.\n\t\t\t\t\t// The farther away an object is, the weaker the force; the closer, the stronger.\n\t\t\t\t\t// original  : without the normalize\n\t\t\t\t\tdir.normalize();\n\n\t\t\t\t\tlet force1 = dir.mult(this.options.REPULSION);\n\t\t\t\t\tforce1.div(distance * distance);\n\n\t\t\t\t\tlet inverseForce = force1.copy().mult(-1);\n\t\t\t\t\tnode2.acceleration.add(force1);\n\t\t\t\t\tnode1.acceleration.add(inverseForce);\n\n\t\t\t\t\t//node2.applyForce(force1);\n\t\t\t\t\t//node1.applyForce(inverseForce);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tapplyForcesExertedByConnections() {\n\t\tthis.graph.linkList.forEach((link) => {\n\t\t\tlet node1 = link.source;\n\t\t\tlet node2 = link.target;\n\n\t\t\t//let maxDis = con[2];\n\t\t\t//let connector_length = 100;\n\n\t\t\tlet dir = Vector.sub(node1.pos, node2.pos);\n\n\t\t\tlet neg_force = new Vector(0, 0).sub(dir);\n\t\t\tlet pos_force = new Vector(0, 0).add(dir);\n\n\t\t\tnode1.acceleration.add(neg_force);\n\t\t\tnode2.acceleration.add(pos_force);\n\n\t\t\t//node1.applyForce(neg_force);\n\t\t\t//node2.applyForce(pos_force);\n\t\t});\n\t}\n\n\tapplyForces() {\n\t\t// Force equals mass times acceleration.\n\t\t// Newton’s second law, F→=M×A→ (or force = mass * acceleration).\n\t\tthis.applyForcesTowardsCenter();\n\n\t\tthis.applyRepulsiveForces();\n\n\t\tthis.applyForcesExertedByConnections();\n\n\t\tthis.updateNodesVelocity();\n\n\t\t// kinetic energy (KE) is equal to half of an object's mass (1/2*m) multiplied by the velocity squared.\n\t\t/*\n\t\tlet total_KE = 0.0;\n\t\tthis.graph.nodeList.forEach((node) => {\n\t\t\tlet velocity = node.velocity.mag();\n\n\t\t\tlet node_KE = 0.5 * node.mass * (velocity * velocity);\n\t\t\ttotal_KE = + node_KE;\n\n\t\t});\n\t\tconsole.warn(\"total_KE= \" + total_KE);\n\t\t*/\n\t}\n}\n","\n\nexport var NONE = \"none\";\nexport var pi = Math.PI;\n","import {NONE} from './Constants.js';\n\nexport default class Shape {\n    constructor(x, y, type) {\n        this.type = type;\n        this.x = x;\n        this.y = y;\n        this.isSelected = false;\n        this.strokeStyle = NONE;\n\n    }\n    getColor() {\n        return this.color;\n    }\n}","import Shape from './Shape.js';\nimport { NONE } from './Constants.js';\n\nexport default class Arc extends Shape {\n  constructor(x, y, radius, radians) {\n    super(x, y, \"Arc\");\n    this.radius = radius;\n    this.radians = radians;\n  }\n  isHit(x, y) {\n    var dx = this.x - x;\n    var dy = this.y - y;\n    if (dx * dx + dy * dy < this.radius * this.radius) {\n      return true;\n    }\n  }\n  render(ctx) {\n    ctx.save();\n\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, this.radians, false);\n\n    if (this.fillStyle) {\n      ctx.fillStyle = this.fillStyle;\n      ctx.fill();\n    }\n\n    if (this.strokeStyle != NONE) {\n      ctx.strokeStyle = this.strokeStyle;\n      ctx.lineWidth = this.lineWidth;\n      ctx.stroke();\n    }\n\n    ctx.restore();\n  }\n}","import Arc from './Arc.js';\n\n\nexport default class Circle extends Arc {\n    constructor(x, y, radius) {\n      super(x, y, radius, Math.PI *2);\n      this.type = \"Circle\";\n    }\n    isHit(x, y) {\n      var dx = this.x - x;\n      var dy = this.y - y;\n      if (dx * dx + dy * dy < this.radius * this.radius) {\n        return true;\n      }\n    }\n\n    getBBox() {\n      return {\n        x: this.x - this.radius,\n        y: this.y - this.radius,\n        width : this.radius * 2,\n        height : this.radius * 2\n      }\n    }\n  }","import Shape from './Shape.js';\nimport { NONE } from './Constants.js';\n\n\nexport default class Rectangle extends Shape {\n    constructor(x, y, width, height) {\n        super(x, y, \"Rectangle\");\n        this.width = width;\n        this.height = height;\n    }\n    getArea() {\n        return this.width * this.height;\n    }\n\n    isHit(x, y) {\n        if (\n            x > this.x &&\n            x < this.x + this.width &&\n            y > this.y &&\n            y < this.y + this.height\n        ) {\n            return true;\n        }\n    }\n    render(ctx) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(\n            this.x,\n            this.y,\n            this.width,\n            this.height\n        );\n\n        if (this.fillStyle) {\n            ctx.fillStyle = this.fillStyle;\n            ctx.fill();\n        }\n        if (this.strokeStyle != NONE) {\n            ctx.strokeStyle = this.strokeStyle;\n            ctx.lineWidth = this.lineWidth;\n            ctx.stroke();\n        }\n        ctx.restore();\n    }\n    toString() {\n        return `rectangle:  (${this.x},${this.y}) x (${this.width},${this.height})`;\n    }\n}","export default class InputDeviceTracker {\n\tconstructor(canvas, callback) {\n\t\tconsole.log(\"InputDeviceTracker ()\");\n\n\t\tthis.canvas = canvas;\n\t\tthis.callback = callback;\n\n\t\t/**\n\t\t *  Stores the panning offset between the initial location and the canvas location after is has been panned\n\t\t */\n\t\tthis.translatedPos = { x: 0, y: 0 };\n\n\t\t/**\n\t\t *  the accumulated horizontal(X) & vertical(Y) panning the user has done in total\n\t\t */\n\t\t(this.netPanningX = 0), (this.netPanningY = 0);\n\n\t\t/**\n\t\t *  coordinates of the last move\n\t\t */\n\t\t(this.lastMoveX = 0), (this.lastMoveY = 0);\n\n\t\tthis.startDragOffset = { x: 0, y: 0 };\n\n\t\tthis.canvas.addEventListener(\"mousedown\", this.onDown.bind(this));\n\t\tthis.canvas.addEventListener(\"mousemove\", this.onMove.bind(this));\n\t\tthis.canvas.addEventListener(\"mouseup\", this.onUp.bind(this));\n\n\t\tthis.canvas.addEventListener(\"touchstart\", this.onDown.bind(this));\n\t\tthis.canvas.addEventListener(\"touchmove\", this.onMove.bind(this));\n\t\tthis.canvas.addEventListener(\"touchend\", this.onUp.bind(this));\n\t}\n\n\tgetCoordinatesFromEvent(evt) {\n\t\tvar rect = self.canvas.getBoundingClientRect();\n\t\tvar offsetTop = rect.top;\n\t\tvar offsetLeft = rect.left;\n\n\t\tif (evt.touches) {\n\t\t\treturn {\n\t\t\t\tx: evt.touches[0].clientX - offsetLeft,\n\t\t\t\ty: evt.touches[0].clientY - offsetTop,\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tx: evt.clientX - offsetLeft,\n\t\t\t\ty: evt.clientY - offsetTop,\n\t\t\t};\n\t\t}\n\t}\n\n\tonDown(event) {\n\t\t// tell the browser we're handling this event\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tvar mouseCoords = this.getCoordinatesFromEvent(event);\n\n\t\t// initial mouse click signaling the start of the dragging motion: we save the location of the user's mouse.\n\t\t// dragging offest = current mouse - panning\n\t\tthis.startDragOffset.x = mouseCoords.x - this.translatedPos.x;\n\t\tthis.startDragOffset.y = mouseCoords.y - this.translatedPos.y;\n\n\t\tthis.callback(\"down\", mouseCoords.x, mouseCoords.y);\n\t}\n\n\tonUp(event) {\n\t\tevent.preventDefault();\n\t\tthis.callback(\"up\");\n\t}\n\n\tonMove(event) {\n\t\t// tell the browser we're handling this event\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tvar mouseCoords = this.getCoordinatesFromEvent(event);\n\t\tthis.callback(\"move\", mouseCoords.x, mouseCoords.y);\n\t}\n}\n","import InputDeviceTracker from \"./InputDeviceTracker\";\nimport { Rectangle, Circle } from \"./shape\";\nimport { Renderer, setupHiDefCanvas } from \"./canvas\";\nimport { rectContainsShape } from \"./geometry\";\n\nexport class MChart {\n\tconstructor(container, options) {\n\t\tconsole.log(\"MChart container()\");\n\t\tconsole.log(container);\n\t\tthis.container = container;\n\t\t(this.startX = 0), (this.startY = 0);\n\t\t(this.lastMoveX = 0), (this.lastMoveY = 0);\n\n\t\tthis.canvas = document.getElementById(\"canvas\");\n\t\t//this.ctx = this.canvas.getContext(\"2d\");\n\t\tthis.ctx = setupHiDefCanvas(this.canvas);\n\n\t\tthis.cw = this.canvas.width;\n\t\tthis.ch = this.canvas.height;\n\n\t\tthis.renderer = new Renderer(this.ctx);\n\t\tthis.inputDeviceTracker = new InputDeviceTracker(\n\t\t\tthis.canvas,\n\t\t\tthis.manageInputEvents.bind(this)\n\t\t);\n\n\t\tconst DEFAULTS = {\n\t\t\tdisplay_grid: false,\n\t\t\tselection: {\n\t\t\t\tstrokeStyle: \"#CC0000\", //  'rgba(255,51,0,1)', //'rgba(0,128,255,1)';\n\t\t\t\tlineWidth: 1,\n\t\t\t\tfillStyle: \"rgba(255,51,0,0.05)\", //'rgba(0,128,255, 0.2)';\n\t\t\t},\n\t\t};\n\t\tthis.options = Object.assign({}, DEFAULTS, options);\n\n\t\t/* The selection rectangle */\n\t\tthis.selection = new Rectangle(100, 100, 100, 100);\n\t\tthis.selection.strokeStyle = this.options.selection.strokeStyle;\n\t\tthis.selection.fillStyle = this.options.selection.fillStyle;\n\t\tthis.selection.lineWidth = this.options.selection.lineWidth;\n\n\t\t/* The list of ojbects to draw */\n\t\tthis.objects = [];\n\n\t\t/**\n\t\t *  Stores the panning offset between the initial location and the canvas location after is has been panned\n\t\t */\n\t\tthis.translatePos = { x: 0, y: 0 };\n\n\t\t/**\n\t\t *  the accumulated horizontal(X) & vertical(Y) panning the user has done in total\n\t\t */\n\t\tthis.netPanningX = 0;\n\t\tthis.netPanningY = 0;\n\n\t\t/**\n\t\t *  coordinates of the last move\n\t\t */\n\t\tthis.lastMoveX = 0; this.lastMoveY = 0;\n\n\t\tthis.isSelecting = false;\n\t\tthis.isDragging = false;\n\t\tthis.clicked_on_the_canvas = false;\n\t}\n\n\tdump() {\n\t\tconsole.log(\"MChart container= \");\n\t\tconsole.log(\"- objects= \");\n\t\tconsole.log(this.objects);\n\t}\n\n\taddObject(object) {\n\t\tthis.objects.push(object);\n\t\t//this.draw();\n\t}\n\n\t/**\n\t *  Private function to render one frame. It is being called by render()\n\t */\n\trenderFrame = () => {\n\t\t// console.log(\"renderFrame\")\n\t\tthis.ctx.clearRect(0, 0, this.cw, this.ch);\n\n\t\tif (this.options.display_grid) {\n\t\t\tthis.renderer.drawGrid(this.cw, this.ch);\n\t\t}\n\n\t\tthis.objects.forEach((object) => {\n\t\t\tobject.render(this.ctx);\n\t\t\tif (object.isSelected) {\n\t\t\t\tvar selection;\n\t\t\t\tif (object instanceof Circle) {\n\t\t\t\t\tvar bbox = object.getBBox();\n\t\t\t\t\tselection = new Rectangle(\n\t\t\t\t\t\tbbox.x,\n\t\t\t\t\t\tbbox.y,\n\t\t\t\t\t\tbbox.width,\n\t\t\t\t\t\tbbox.height\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tselection = new Rectangle(\n\t\t\t\t\t\tobject.x,\n\t\t\t\t\t\tobject.y,\n\t\t\t\t\t\tobject.width,\n\t\t\t\t\t\tobject.height\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tselection.strokeStyle = this.options.selection.strokeStyle;\n\t\t\t\tselection.lineWidth = this.options.selection.lineWidth;\n\t\t\t\tselection.render(this.ctx);\n\n\t\t\t}\n\n\t\t\tif (this.isSelecting == true) {\n\t\t\t\tthis.selection.render(this.ctx);\n\t\t\t}\n\t\t});\n\t};\n\n\trender() {\n\t\tthis.renderFrame();\n\t\twindow.requestAnimationFrame(this.render.bind(this, this.canvas));\n\t}\n\n\tmanageInputEvents(evtType, x, y) {\n\t\tswitch (evtType) {\n\t\t\tcase \"down\":\n\t\t\t\tthis.mouseIsDown = true;\n\n\t\t\t\tthis.startX = x;\n\t\t\t\tthis.startY = y;\n\t\t\t\tthis.lastMoveX = x;\n\t\t\t\tthis.lastMoveY = y;\n\n\t\t\t\t/* we assume the user clicked on the canvas unless we find an object was hit */\n\t\t\t\tthis.clicked_on_the_canvas = true;\n\n\t\t\t\t// we start from last to check the shape that is on top first\n\t\t\t\tfor (var i = this.objects.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar object = this.objects[i];\n\t\t\t\t\t//    console.log (\"checking for hit object = \" + object.color);\n\t\t\t\t\tif (object.isHit(x, y)) {\n\t\t\t\t\t\tobject.isSelected = true;\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\"Clicked on : \" +\n\t\t\t\t\t\t\t\tobject.constructor.name +\n\t\t\t\t\t\t\t\t\"/\" +\n\t\t\t\t\t\t\t\tobject.fillStyle\n\t\t\t\t\t\t);\n\t\t\t\t\t\tmoveObjectToLastPosition(this.objects, object);\n\t\t\t\t\t\tthis.clicked_on_the_canvas = false;\n\t\t\t\t\t\tthis.isSelecting = false;\n\t\t\t\t\t\tthis.isDragging = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"clicked on the canvas = \" + this.clicked_on_the_canvas\n\t\t\t\t);\n\n\t\t\t\tif (this.clicked_on_the_canvas) {\n\t\t\t\t\tconsole.log(\"clicked on the canvas\");\n\t\t\t\t\tthis.selection_startX = x;\n\t\t\t\t\tthis.selection_startY = y;\n\n\t\t\t\t\t/* reset selection if user clicked on the canvas */\n\t\t\t\t\tthis.objects.forEach((object) => {\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\"RESET object \" +\n\t\t\t\t\t\t\t\tobject.fillStyle +\n\t\t\t\t\t\t\t\t\" is Circle ? \" +\n\t\t\t\t\t\t\t\t(object instanceof Circle)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tobject.isSelected = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"up\":\n\t\t\t\tthis.mouseIsDown = false;\n\t\t\t\tconsole.log(\"MOUSE UP\");\n\t\t\t\tconsole.log(\" isDragging : \" + this.isDragging);\n\t\t\t\tconsole.log(\" isSelecting : \" + this.isSelecting);\n\n\t\t\t\tif (this.isSelecting) {\n\t\t\t\t\tconsole.log(\" selection : \" + this.selection);\n\t\t\t\t\t/* check if selection includes any object */\n\t\t\t\t\tthis.objects.forEach((object) => {\n\t\t\t\t\t\tif (rectContainsShape(this.selection, object)) {\n\t\t\t\t\t\t\tobject.isSelected = true;\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\"object is selected: \" +\n\t\t\t\t\t\t\t\t\tobject.constructor.name +\n\t\t\t\t\t\t\t\t\t\"/\" +\n\t\t\t\t\t\t\t\t\tobject.fillStyle\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.isSelecting = false;\n\t\t\t\tthis.isDragging = false;\n\t\t\t\tbreak;\n\n\t\t\tcase \"move\":\n\t\t\t\tif (this.clicked_on_the_canvas && this.mouseIsDown) {\n\t\t\t\t\tthis.isSelecting = true;\n\t\t\t\t\t// getting the min & max to handle when the user selects from bottom right to top left\n\t\t\t\t\tconst x1 = Math.min(this.selection_startX, this.lastMoveX);\n\t\t\t\t\tconst y1 = Math.min(this.selection_startY, this.lastMoveY);\n\t\t\t\t\tconst x2 = Math.max(this.selection_startX, this.lastMoveX);\n\t\t\t\t\tconst y2 = Math.max(this.selection_startY, this.lastMoveY);\n\n\t\t\t\t\tthis.selection.x = Math.floor(x1);\n\t\t\t\t\tthis.selection.y = Math.floor(y1);\n\t\t\t\t\tthis.selection.width = Math.floor(x2 - x1);\n\t\t\t\t\tthis.selection.height = Math.floor(y2 - y1);\n\t\t\t\t}\n\t\t\t\tthis.lastMoveX = x;\n\t\t\t\tthis.lastMoveY = y;\n\n\t\t\t\tvar dx = x - this.startX;\n\t\t\t\tvar dy = y - this.startY;\n\n\t\t\t\tthis.startX = x;\n\t\t\t\tthis.startY = y;\n\n\t\t\t\tif (this.isDragging) {\n\t\t\t\t\tthis.objects.forEach((object) => {\n\t\t\t\t\t\tif (object.isSelected) {\n\t\t\t\t\t\t\tobject.x += dx;\n\t\t\t\t\t\t\tobject.y += dy;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tinit() {\n\t\tthis.inputDeviceTracker = new InputDeviceTracker(\n\t\t\tthis.canvas,\n\t\t\tthis.manageInputEvents.bind(this)\n\t\t);\n\t}\n}\n\n/**\n *  We move the node selection to the last position so that it is drawn above the other shapes on the canvas\n */\nfunction moveObjectToLastPosition(object_list, object_to_move) {\n\tobject_list.forEach(function (object, index) {\n\t\tif (object === object_to_move) {\n\t\t\tobject_list.splice(index, 1);\n\t\t\tobject_list.push(object_to_move);\n\t\t\treturn;\n\t\t}\n\t});\n}","// =============================================================\n//                          TRIGO FUNCTIONS\n// =============================================================\nexport const TWO_PI = Math.PI * 2;\n\n/**\n * Concernt mouse (x, y) relative to the center of the circle\n */\nexport function ConvertMousePositionToCoordinateGraph(mousePos, center) {\n  return {\n    x: mousePos.x - center.x,\n    y: -1 * (mousePos.y - center.y)\n  }\n}\n\nexport function to_radians(degrees) {\n  return degrees * (Math.PI / 180);\n}\n\nexport function to_degrees(radians) {\n  return radians * (180 / Math.PI);\n}\n\nexport function distanceXY(x0, y0, x1, y1) {\n  var dx = x1 - x0;\n  var dy = y1 - y0;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function pointInCircle(point, circle) {\n  return distanceXY(point.x, point.y, circle.x, circle.y) < circle.radius;\n}\n\n/**\n * Convert from cartesian coordinates (x, y) to polar coordinates (r, θ).\n * @param {*} cx \n * @param {*} cy \n * @param {*} r \n * @param {*} angle \n * @returns \n */\nexport function getPointOnArc(cx, cy, r, angle) {\n  return {\n    x: cx + r * Math.cos(angle),\n    y: cy + r * Math.sin(angle)\n  };\n}\nexport function __getPointOnArc(point, r, angle) {\n  return {\n    x: point.x + r * Math.cos(angle),\n    y: point.y + r * Math.sin(angle)\n  };\n\n}\nexport function rotate(x, y, angle) {\n  return {\n    x: x * Math.cos(angle) - y * Math.sin(angle),\n    y: x * Math.sin(angle) + y * Math.cos(angle)\n  };\n}\n\n/*\n * Returns the angle θ between 2 points\n */\nfunction findAngle(p1, p2) {\n  var angleRAD = Math.atan2(p2.y - p1.y, p2.x - p1.x);\n  return angleRAD;\n}\n\n/**\n * Calculates the midpoint between two points [x1,y1] &  [x2,y2]\n */\nexport function midpoint(x1, y1, x2, y2) {\n  return {\n    x: (x1 + x2) / 2,\n    y: (y1 + y2) / 2\n  };\n}\n\n\n//bearing between the compass'center point and the specified point\nexport function __getBearing(point) {\n  var compass_points = [\"N\", \"NE\", \"E\", \"SE\", \"S\", \"SW\", \"W\", \"NW\", \"N\"];\n  var bearing = findAngle(\n    { x: this.cx, y: -this.cy },\n    { x: point.x, y: -point.y });\n\n    var bearingTT;\n  if (bearing < 0) {\n     bearingTT = 360 + bearing;\n   } \n   else {\n     bearingTT = bearing;\n   }\n  var compass_lookup = Math.round(bearingTT / 45);\n//  log(bearingTT + \" \" + compass_lookup + \" - \" + bearing);\n  return compass_points[compass_lookup];\n}","\nexport * from \"./canvas\";\nexport * from \"./geometry\";\nexport * from \"./graph\";\nexport * from \"./layout\";\nexport * from \"./shape\";\n\nexport {MChart} from \"./MChart\";\n\nexport var version = \"0.1\"\n\n\n"],"names":["setupHiDefCanvas","canvas","devicePixelRatio","window","ctx","getContext","console","log","width","height","rect","getBoundingClientRect","initialWidth","initialHeight","scale","style","Renderer","_classCallCheck","this","_createClass","key","value","w","h","save","fillStyle","fillRect","lineWidth","strokeStyle","i","beginPath","moveTo","lineTo","closePath","stroke","fillText","concat","restore","Vector","x","y","isNaN","warn","n","error","v1","amount","Math","atan2","sqrt","magSq","div","mag","normalize","mult","v2","v","copy","lerp","min","max","randomIntBounds","floor","random","rectContainsShape","rectangle","shape","type","circle","left_include","radius","right_include","bottom_include","top_include","rectContainsCircle","rect2","result_X","rect1","result_Y","Link","source","target","id","Node","data","level","children","parent","neighbor","isCollapsed","size","mass","pos","velocity","acceleration","node","push","indexOf","getChildAt","length","getChildrenCount","isAncestorCollapsed","getFirstChild","getLastChild","isLeftMost","index","isRightMost","Graph","graph","nodeList","linkList","adjacency","changed","root","nodeID","object","parentId","getNode","addNode","sourceNode_id","targetNode_id","sourceNode","undefined","TypeError","targetNode","link","exists","forEach","item","addChild","json_input","json_object","json_string","JSON","parse","nodes","addObject","links","addLink","map","printNode","adjacentsRepresentation","getAdjacents","join","ForceDirected","_GraphLayout","options","_this","initNodes","Object","assign","GRAVITY","REPULSION","_possibleConstructorReturn","_inherits","GraphLayout","_createSuper","force","forceOverMass","add","_this2","gravity","j","node1","node2","dir","sub","distance","force1","inverseForce","neg_force","pos_force","applyForcesTowardsCenter","applyRepulsiveForces","applyForcesExertedByConnections","updateNodesVelocity","NONE","Shape","isSelected","color","Arc","_Shape","_super","radians","call","dx","dy","arc","fill","Circle","_Arc","PI","Rectangle","InputDeviceTracker","callback","translatedPos","netPanningX","netPanningY","lastMoveX","lastMoveY","startDragOffset","addEventListener","onDown","bind","onMove","onUp","evt","self","offsetTop","top","offsetLeft","left","touches","clientX","clientY","event","preventDefault","stopPropagation","mouseCoords","getCoordinatesFromEvent","MChart","container","clearRect","cw","ch","display_grid","renderer","drawGrid","objects","render","selection","bbox","getBBox","isSelecting","startX","startY","document","getElementById","inputDeviceTracker","manageInputEvents","translatePos","isDragging","clicked_on_the_canvas","renderFrame","requestAnimationFrame","evtType","mouseIsDown","isHit","constructor","name","moveObjectToLastPosition","selection_startX","selection_startY","x1","y1","x2","y2","object_list","object_to_move","splice","degrees"],"mappings":"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"}