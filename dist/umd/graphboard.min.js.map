{"version":3,"file":"graphboard.min.js","sources":["../../src/hello/hello.js","../../src/shape/Constants.js","../../src/shape/Shape.js","../../src/shape/Arc.js","../../src/shape/Circle.js","../../src/shape/Rectangle.js","../../src/Vector.js","../../src/layout/ForceDirected.js","../../src/InputDeviceTracker.js","../../src/Renderer.js","../../src/MChart.js","../../src/graph/Graph.js","../../src/graph/Node.js","../../src/index.js"],"sourcesContent":["export default function hello(name) {\n    return (\"hello \" + name) ;\n  }\n  ","\n\nexport var NONE = \"none\";\nexport var pi = Math.PI;\n","import {NONE} from './Constants.js';\n\nexport default class Shape {\n    constructor(x, y, type) {\n        this.type = type;\n        this.x = x;\n        this.y = y;\n        this.isSelected = false;\n        this.strokeStyle = NONE;\n\n    }\n    getColor() {\n        return this.color;\n    }\n}","import Shape from './Shape.js';\nimport { NONE } from './Constants.js';\n\nexport default class Arc extends Shape {\n  constructor(x, y, radius, radians) {\n    super(x, y);\n    this.radius = radius;\n    this.radians = radians;\n  }\n  isHit(x, y) {\n    var dx = this.x - x;\n    var dy = this.y - y;\n    if (dx * dx + dy * dy < this.radius * this.radius) {\n      return true;\n    }\n  }\n  render(ctx) {\n    ctx.save();\n\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, this.radians, false);\n\n    if (this.fillStyle) {\n      ctx.fillStyle = this.fillStyle;\n      ctx.fill();\n    }\n\n    if (this.strokeStyle != NONE) {\n      ctx.strokeStyle = this.strokeStyle;\n      ctx.lineWidth = this.lineWidth;\n      ctx.stroke();\n    }\n\n    ctx.restore();\n  }\n}","import Arc from './Arc.js';\n\n\nexport default class Circle extends Arc {\n    constructor(x, y, radius) {\n      super(x, y, radius, Math.PI *2);\n    }\n    isHit(x, y) {\n      var dx = this.x - x;\n      var dy = this.y - y;\n      if (dx * dx + dy * dy < this.radius * this.radius) {\n        return true;\n      }\n    }\n\n    getBBox() {\n      return {\n        x: this.x - this.radius,\n        y: this.y - this.radius,\n        width : this.radius * 2,\n        height : this.radius * 2\n      }\n    }\n  }","import Shape from './Shape.js';\nimport { NONE } from './Constants.js';\n\n\nexport default class Rectangle extends Shape {\n    constructor(x, y, width, height) {\n        super(x, y);\n        this.width = width;\n        this.height = height;\n    }\n    getArea() {\n        return this.width * this.height;\n    }\n\n    isHit(x, y) {\n        if (\n            x > this.x &&\n            x < this.x + this.width &&\n            y > this.y &&\n            y < this.y + this.height\n        ) {\n            return true;\n        }\n    }\n    render(ctx) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(\n            this.x,\n            this.y,\n            this.width,\n            this.height\n        );\n\n        if (this.fillStyle) {\n            ctx.fillStyle = this.fillStyle;\n            ctx.fill();\n        }\n        if (this.strokeStyle != NONE) {\n            ctx.strokeStyle = this.strokeStyle;\n            ctx.lineWidth = this.lineWidth;\n            ctx.stroke();\n        }\n        ctx.restore();\n    }\n    toString() {\n        return `rectangle:  (${this.x},${this.y}) x (${this.width},${this.height})`;\n    }\n}","/**\n *  A vector is an entity that has both magnitude and direction.\n *  2D vector implementation based on the vector functions in P5.js\n */\nexport class Vector {\n\tconstructor(x, y) {\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\n\t\tif (isNaN(x) || isNaN(y)) {\n\t\t\tconsole.warn(`Vector(): parameters are not number: (${x}), ${y} `);\n\t\t}\n\t\t/*\n\t\tconsole.log(\"in Vector()\");\n\t\tconsole.log(\"this.x  = \" + this.x);\n\t\tconsole.log(\"this.y  = \" + this.y);\n\n\t\tconsole.log(\"typeof x  = \" + typeof y);\n\t\tconsole.log(\"typeof y  = \" + typeof y);\n\t\t*/\n\t}\n\n\tstatic add(v1, v2) {\n\t\treturn new Vector(v1.x + v2.x, v1.y + v2.y);\n\t}\n\n\t/**\n\t * Divides a vector by a scalar and returns a new vector.\n\t *\n\t * @method div\n\t * @static\n\t * @param  {Vector} v\n\t * @param  {Number}  n\n\t * @return  {Vector}\n\t */\n\tstatic div(v, n) {\n\t\tlet result = v.copy();\n\t\treturn result.div(n);\n\t}\n\n\t/**\n\t * Linear interpolate the vector to another vector\n\t */\n\tstatic lerp(v1, v2, amount) {\n\t\tlet result = v1.copy();\n\t\treturn result.lerp(v2, amount);\n\t}\n\n\tstatic random(min, max) {\n\t\tlet x = randomIntBounds(min, max);\n\t\tlet y = randomIntBounds(min, max);\n\t\treturn new Vector(x, y);\n\t}\n\n\tstatic sub(v1, v2) {\n\t\treturn new Vector(v1.x - v2.x, v1.y - v2.y);\n\t}\n\n\t/**\n\t * Supports adding a Vector or a Scalar\n\t * @param {*} n\n\t * @returns\n\t */\n\tadd(n) {\n\t\tif (n instanceof Vector) {\n\t\t\tthis.x += n.x;\n\t\t\tthis.y += n.y;\n\t\t\treturn this;\n\t\t} else if (typeof n === \"number\") {\n\t\t\tthis.x += n;\n\t\t\tthis.y += n;\n\t\t\treturn this;\n\t\t} else {\n\t\t\tconsole.error(`Parameter in Vector.add(n) Not supported: ${n})`);\n\t\t}\n\t}\n\n\t/**\n\t *  Return a new vector\n\t * @returns\n\t */\n\tcopy() {\n\t\treturn new Vector(this.x, this.y);\n\t}\n\n\t/* divide vector length (ie magnitude) by a constant*/\n\tdiv(n) {\n\t\tif (n === 0) {\n\t\t\t//console.warn(\"Vector.div:\", \"divide by 0\");\n\t\t\treturn this;\n\t\t}\n\t\tthis.x /= n;\n\t\tthis.y /= n;\n\t\treturn this;\n\t}\n\n\tlerp(v1, amount) {\n\t\tthis.x += (v1.x - this.x) * amount || 0;\n\t\tthis.y += (v1.y - this.y) * amount || 0;\n\t\treturn this;\n\t}\n\n\theading() {\n\t\tconst h = Math.atan2(this.y, this.x);\n\t\treturn h;\n\t}\n\n\tmagSq() {\n\t\tconst x = this.x;\n\t\tconst y = this.y;\n\t\treturn x * x + y * y;\n\t}\n\n\tmag() {\n\t\treturn Math.sqrt(this.magSq());\n\t}\n\n\tnormalize() {\n\t\treturn this.div(this.mag());\n\t}\n\n\t/**\n\tMultiply vector length (ie magnitude) by a constant\n\t*/\n\tmult(n) {\n\t\tthis.x *= n;\n\t\tthis.y *= n;\n\t\treturn this;\n\t}\n\n\t/**\n\t *  set magnitude to a given value\n\t */\n\tsetMag(n) {\n\t\treturn this.normalize().mult(n);\n\t}\n\n\n\t/**\n\t * \n\t * @param {*} n \n\t * @returns \n\t */\n\tsub(n) {\n\t\tif (n instanceof Vector) {\n\t\t\tthis.x -= n.x;\n\t\t\tthis.y -= n.y;\n\t\t\treturn this;\n\t\t} else if (typeof n === \"number\") {\n\t\t\tthis.x -= n;\n\t\t\tthis.y -= n;\n\t\t\treturn this;\n\t\t} else {\n\t\t\tconsole.error(`Parameter in Vector.sub(n) Not supported: ${n})`);\n\t\t}\n\t}\n\n\ttoString() {\n\t\treturn \"[\" + this.x + \", \" + this.y + \"]\";\n\t}\n}\n\n/* Return a random integer between min and max (inclusive) */\nfunction randomIntBounds(min, max) {\n\treturn Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport default Vector;\n","import Vector from '../Vector';\n\nexport default class ForceDirected {\n  constructor(graph, options) {\n\n    this.graph = graph;\n    this.initNodes();\n\n\n\n    const DEFAULTS = {\n      GRAVITY: 2, // 0.9,\n      REPULSION: 500000,\n    }\n    this.options = Object.assign({}, DEFAULTS, options);\n\n  }\n\n  initNodes() {\n\n        /* we may want to have distinct min, max values for x and y */\n        let min = -1000;\n        let max =  1000;\n\n    this.graph.nodeList.forEach((node) => {\n      node.pos = new Vector.random(min, max);\n    });\n  }\n\n  applyForcesTowardsCenter() {\n    // apply force towards center\n    this.graph.nodeList.forEach((node) => {\n      let gravity = node.pos.copy().mult(-1).mult(this.options.GRAVITY);\n      node.force = gravity;\n      //node.applyForce(gravity);\n      //console.log(node);\n    });\n  }\n\n  applyRepulsiveForces() {\n    // apply repulsive force between nodes\n    for (let i = 0; i < this.graph.nodeList.length; i++) {\n      for (let j = i + 1; j < this.graph.nodeList.length; j++) {\n        if (i != j) {\n          let node1 = this.graph.nodeList[i];\n          let node2 = this.graph.nodeList[j];\n\n          // The gravitational force F between two bodies of mass m1 and m2 is\n          // F = G*m1*m2 / r2\n          // the vector that points from one object to the other\n          let dir = Vector.sub(node2.pos, node1.pos);\n         // let unit = dir.copy().normalize()\n\n          // the length (magnitude) of that vector is the distance between the two objects.\n          let distance = dir.mag();\n\n          // The strength of the force is inversely proportional to the distance squared.\n          // The farther away an object is, the weaker the force; the closer, the stronger.\n\n          // original  : without the normalize\n          dir.normalize()\n\n          let force1 = dir.mult(this.options.REPULSION);\n          force1.div(distance * distance);\n\n          let inverseForce = force1.copy().mult(-1);\n          node2.force.add(force1);\n          node1.force.add(inverseForce);\n        }\n      }\n    }\n  }\n\n  applyForcesExertedByConnections() {\n    this.graph.linkList.forEach((con) => {\n      let node1 = this.graph.nodeList[con[0]];\n      let node2 = this.graph.nodeList[con[1]];\n\n      //let maxDis = con[2];\n\n      let dir = Vector.sub(node1.pos, node2.pos);\n\n      let neg_force = new Vector(0, 0).sub(dir);\n      let pos_force = new Vector(0, 0).add(dir);\n\n      node1.force.add(neg_force);\n      node2.force.add(pos_force);\n    });\n  }\n\n  applyForces() {\n\n    // Force equals mass times acceleration.\n    // Newton’s second law, F→=M×A→ (or force = mass * acceleration).\n    this.applyForcesTowardsCenter();\n\n    this.applyRepulsiveForces();\n\n    this.applyForcesExertedByConnections();\n\n\n\n    // kinetic energy (KE) is equal to half of an object's mass (1/2*m) multiplied by the velocity squared.\n    //let total_KE = 0.0;\n    /*\n    nodes.forEach((node) => {\n      let node_KE = (0.5 * node.mass * node.velocity * node.velocity);\n      total_KE =+  node_KE;\n      });\n      console.log(\"total_KE=\" + total_KE);\n  */\n  }\n\n}","export default class InputDeviceTracker {\n\n    constructor(canvas, callback) {\n        console.log(\"InputDeviceTracker ()\");\n\n        this.canvas = canvas;\n        this.callback = callback;\n        self = this;\n\n        console.log(\"constructor this\");\n        console.log(this);\n\n        this.canvas.addEventListener('mousedown', this.onDown.bind(this));\n        this.canvas.addEventListener('mousemove', this.onMove.bind(this));\n        this.canvas.addEventListener('mouseup', this.onUp.bind(this));\n\n        this.canvas.addEventListener('touchstart', this.onDown.bind(this));\n        this.canvas.addEventListener('touchmove', this.onMove.bind(this));\n        this.canvas.addEventListener('touchend', this.onUp.bind(this));\n    }\n\n    getCoordinatesFromEvent(evt) {\n        var rect = self.canvas.getBoundingClientRect();\n        var offsetTop = rect.top;\n        var offsetLeft = rect.left;\n\n        if (evt.touches) {\n            return {\n                x: evt.touches[0].clientX - offsetLeft,\n                y: evt.touches[0].clientY - offsetTop\n            };\n        } else {\n            return {\n                x: evt.clientX - offsetLeft,\n                y: evt.clientY - offsetTop\n            };\n        }\n    }\n\n    onDown(evt) {\n        evt.preventDefault();\n        var coords = self.getCoordinatesFromEvent(evt);\n        self.callback(\"down\", coords.x, coords.y);\n    }\n\n    onUp(evt) {\n        evt.preventDefault();\n        self.callback(\"up\");\n    }\n\n    onMove(evt) {\n        evt.preventDefault();\n        var coords = self.getCoordinatesFromEvent(evt);\n        self.callback(\"move\", coords.x, coords.y);\n    }\n}","\n\nexport class Renderer {\n\n    constructor(ctx) {\n        this.ctx = ctx;\n    }\n\n    drawGrid(w, h) {\n\n        this.ctx.save()\n\n        this.ctx.fillStyle = 'white'\n        this.ctx.fillRect(0, 0, w, h)\n        this.ctx.lineWidth = 0.3;\n        this.ctx.strokeStyle = 'lightgray'\n        this.ctx.fillStyle = 'black'\n\n        for (let i = 1; i < w; i++) {\n            this.ctx.beginPath()\n            if (i % 10 === 0) {\n                this.ctx.moveTo(i, 0);\n                this.ctx.lineTo(i, h)\n                this.ctx.moveTo(i, 0);\n            }\n            this.ctx.closePath()\n            this.ctx.stroke()\n        }\n\n        for (let i = 1; i < h; i++) {\n            this.ctx.beginPath()\n            if (i % 10 === 0) {\n                this.ctx.moveTo(0, i)\n                this.ctx.lineTo(w, i)\n                this.ctx.moveTo(0, i)\n            }\n            this.ctx.closePath()\n            this.ctx.stroke()\n        }\n\n\n        this.ctx.lineWidth = 1\n        this.ctx.strokeStyle = 'gray'\n\n        this.ctx.beginPath()\n        for (let i = 50; i < w; i += 10) {\n            if (i % 50 === 0) {\n                this.ctx.moveTo(i, 0)\n                this.ctx.lineTo(i, 30)\n                this.ctx.fillText(` ${i}`, i, 30)\n            } else {\n                this.ctx.moveTo(i, 0)\n                this.ctx.lineTo(i, 10)\n            }\n\n        }\n        this.ctx.closePath()\n        this.ctx.stroke()\n\n        this.ctx.beginPath()\n        for (let i = 50; i < h; i += 10) {\n            if (i % 50 === 0) {\n                this.ctx.moveTo(0, i)\n                this.ctx.lineTo(30, i)\n                this.ctx.fillText(` ${i}`, 30, i)\n            } else {\n                this.ctx.moveTo(0, i)\n                this.ctx.lineTo(10, i)\n            }\n\n        }\n        this.ctx.closePath()\n        this.ctx.stroke()\n\n        this.ctx.restore()\n    }\n}","import InputDeviceTracker from './InputDeviceTracker'\nimport { Rectangle, Circle } from './shape';\nimport { Renderer } from './Renderer';\n\nexport class MChart {\n\n  constructor(container, options) {\n    console.log(\"MChart container()\");\n    console.log(container);\n    this.container = container;\n    this.startX = 0, this.startY = 0;\n    this.lastMoveX = 0, this.lastMoveY = 0;\n\n    this.canvas = document.getElementById(\"canvas\");\n    this.ctx = this.canvas.getContext(\"2d\");\n\n    //let w = canvas.width = canvas2.width = window.innerWidth * 0.9;\n    //let h = canvas.height = canvas2.height = window.innerHeight * 0.9;\n\n    this.w = this.canvas.width = window.innerWidth ;\n    this.h = this.canvas.height = window.innerHeight ;\n\n    this.renderer = new Renderer(this.ctx);\n\n    const DEFAULTS = {\n      display_grid: false,\n      selection: {\n        strokeStyle: '#CC0000', //  'rgba(255,51,0,1)', //'rgba(0,128,255,1)';\n        lineWidth: 1,\n        fillStyle: 'rgba(255,51,0,0.01)'  //'rgba(0,128,255, 0.2)';\n      }\n    }\n    this.options = Object.assign({}, DEFAULTS, options);\n\n    /* The selection rectangle */\n    this.selection = new Rectangle(100, 100, 100, 100);\n    this.selection.strokeStyle = this.options.selection.strokeStyle;\n    this.selection.fillStyle = this.options.selection.fillStyle;\n    this.selection.lineWidth = this.options.selection.lineWidth;\n\n    /* The list of ojbects to draw */\n    this.objects = [];\n\n\n\n    this.isSelecting = false;\n    this.isDragging = false;\n    this.clicked_on_the_canvas = false;\n  }\n\n  dump() {\n    console.log(\"MChart container= \");\n    console.log(\"- objects= \");\n    console.log(this.objects);\n  }\n\n  addObject(object) {\n    this.objects.push(object);\n    this.draw();\n  }\n\n  draw() {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n    if (this.options.display_grid) {\n      this.renderer.drawGrid(this.w, this.h);\n    }\n\n    this.objects.forEach((object) => {\n      object.render(this.ctx);\n      if (object.isSelected) {\n        var selection;\n        if (object instanceof Circle) {\n          var bbox = object.getBBox();\n          selection = new Rectangle(bbox.x, bbox.y, bbox.width, bbox.height);\n        }\n        else {\n          selection = new Rectangle(object.x, object.y, object.width, object.height);\n        }\n        selection.strokeStyle = this.options.selection.strokeStyle;\n        selection.lineWidth = this.options.selection.lineWidth;\n        selection.render(this.ctx);\n      }\n\n      if (this.isSelecting == true) {\n        this.selection.render(this.ctx);\n      }\n    })\n  }\n\n  manageInputEvents(evtType, x, y) {\n    switch (evtType) {\n      case \"down\":\n        this.mouseIsDown = true;\n\n        this.startX = x;\n        this.startY = y;\n        this.lastMoveX = x;\n        this.lastMoveY = y;\n\n        /* we assume the user clicked on the canvas unless we find an object was hit */\n        this.clicked_on_the_canvas = true;\n\n        // we start from last to check the shape that is on top first\n        for (var i = this.objects.length - 1; i >= 0; i--) {\n          var object = this.objects[i];\n          //    console.log (\"checking for hit object = \" + object.color);\n          if (object.isHit(x, y)) {\n            object.isSelected = true;\n            console.log(\"Clicked on : \" + object.constructor.name + \"/\" + object.fillStyle);\n            moveObjectToLastPosition(this.objects, object);\n            this.clicked_on_the_canvas = false;\n            this.isSelecting = false;\n            this.isDragging = true;\n          }\n\n        }\n        console.log(\"clicked on the canvas = \" + this.clicked_on_the_canvas);\n\n        if (this.clicked_on_the_canvas) {\n          console.log(\"clicked on the canvas\");\n          this.selection_startX = x;\n          this.selection_startY = y;\n\n          /* reset selection if user clicked on the canvas */\n          this.objects.forEach((object) => {\n            console.log(\"RESET object \" + object.fillStyle + \" is Circle ? \" + (object instanceof Circle));\n            object.isSelected = false;\n          });\n        }\n        break;\n\n      case \"up\":\n        this.mouseIsDown = false;\n        console.log(\"MOUSE UP\");\n        console.log(\" isDragging : \" + this.isDragging);\n        console.log(\" isSelecting : \" + this.isSelecting);\n\n        if (this.isSelecting) {\n\n\n\n          console.log(\" selection : \" + this.selection);\n          /* check if selection includes any object */\n          this.objects.forEach((object) => {\n\n            if (rectContainsShape(this.selection, object)) {\n              object.isSelected = true;\n              console.log(\"object is selected: \" + object.constructor.name + \"/\" + object.fillStyle);\n            }\n          });\n        }\n\n\n        this.isSelecting = false;\n        this.isDragging = false;\n        break;\n\n      case \"move\":\n        if (this.clicked_on_the_canvas && this.mouseIsDown) {\n          this.isSelecting = true;\n          // getting the min & max to handle when the user selects from bottom right to top left \n          const x1 = Math.min(this.selection_startX, this.lastMoveX);\n          const y1 = Math.min(this.selection_startY, this.lastMoveY);\n          const x2 = Math.max(this.selection_startX, this.lastMoveX);\n          const y2 = Math.max(this.selection_startY, this.lastMoveY);\n\n          this.selection.x = Math.floor(x1);\n          this.selection.y = Math.floor(y1);\n          this.selection.width = Math.floor(x2 - x1);\n          this.selection.height = Math.floor(y2 - y1);\n        }\n        this.lastMoveX = x;\n        this.lastMoveY = y;\n\n        var dx = x - this.startX;\n        var dy = y - this.startY;\n\n        this.startX = x;\n        this.startY = y;\n\n        if (this.isDragging) {\n          this.objects.forEach((object) => {\n            if (object.isSelected) {\n              object.x += dx;\n              object.y += dy;\n            }\n          });\n        }\n        break;\n    }\n    this.draw();\n  }\n\n  init() {\n    this.inputDeviceTracker = new InputDeviceTracker(this.canvas, this.manageInputEvents.bind(this));\n  }\n}\n\n/**\n *  We move the node selection to the last position so that it is drawn above the other shapes on the canvas\n */\nfunction moveObjectToLastPosition(object_list, object_to_move) {\n  object_list.forEach(function (object, index) {\n    if (object === object_to_move) {\n      object_list.splice(index, 1);\n      object_list.push(object_to_move);\n      return;\n    }\n  });\n}\n\n\n\nfunction rectContainsShape(rectangle, shape) {\n\n  if (shape.constructor.name == \"Circle\") {\n    return rectContainsCircle(rectangle, shape);\n  }\n  else if (shape.constructor.name == \"Rectangle\") {\n    return rectContainsRect(rectangle, shape);\n  }\n  else {\n    console.error(\"rectContainsShape: shape is unknown: \" + shape);\n  }\n}\n\nfunction rectContainsRect(rect1, rect2) {\n\n  var result_X = (rect1.x) < (rect2.x) &&\n    (rect1.x + rect1.width) > (rect2.x + rect2.width);\n\n  var result_Y = (rect1.y) < (rect2.y) &&\n    (rect1.y + rect1.height) > (rect2.y + rect2.height);\n\n  return result_X & result_Y;\n}\n\nfunction rectContainsCircle(rectangle, circle) {\n\n  // LEFT \n  var left_include = rectangle.x < circle.x - circle.radius;\n  if (!left_include) {\n    //circle is outside of the rectangle on the left side\n    return false;\n  }\n  // RIGHT \n  var right_include = rectangle.x + rectangle.width > circle.x + circle.radius;\n  if (!right_include) {\n    //circle is outside of the rectangle on the right side\n    return false;\n  }\n  // BOTTOM \n  var bottom_include = rectangle.y + rectangle.height > circle.y + circle.radius;\n  if (!bottom_include) {\n    //circle is outside of the rectangle on the bottom side\n    return false;\n  }\n  // TOP: \n  var top_include = rectangle.y < circle.y - circle.radius;\n  if (!top_include) {\n    //circle is outside of the rectangle on the top side\n    return false;\n  }\n  return true;\n}","\n// =============================================================\n//                          Graph\n// =============================================================\nexport default class Graph {\n    constructor() {\n        \n        this.graph = {};\n        this.nodeList = [];\n        this.linkList = [];\n        this.adjacency = {};\n        this.changed = false;\n        this.root;    \n    }\n\n    test () {\n        console.log\n    }\n}","\nimport Vector from '../Vector';\n\n  const PI_2 = Math.PI * 2;\n\nexport default class Node {\n\n\n    constructor(id) {\n      this.id = id;\n      this.size = 10;\n      this.mass = (PI_2 * this.size) / 1.5;\n      this.radius = this.size;\n\n      this.pos = new Vector(0, 0);\n      this.force = new Vector(0, 0);\n      this.velocity = new Vector(0, 0);\n      this.acceleration = new Vector(0, 0);\n    }\n    draw(ctx) {\n      ctx.beginPath();\n      ctx.fillStyle = \"darkGrey\";\n      ctx.arc(this.pos.x, this.pos.y, this.radius, 0, PI_2, false);\n      ctx.fill();\n      ctx.closePath();\n      ctx.fillStyle = \"black\";\n      ctx.textAlign = \"center\";\n      ctx.textBaseline = \"middle\";\n      ctx.fillText(this.id, this.pos.x, this.pos.y);\n    }\n\n    /**\n     *  applyForce\n     *\n     *  Newton’s second law.\n     *  Receive a force, divide by mass, and add to acceleration.\n    */\n    __applyForce(force) {\n      let f = Vector.div(force, this.mass);\n      this.acceleration.add(f);\n    }\n\n    update() {\n\n      let force_copy = this.force.copy();\n      let velocity = force_copy.div(this.mass);\n      this.pos.add(velocity);\n      /*\n            this.velocity.add(this.acceleration);\n            this.pos.add(this.velocity);\n            this.acceleration.mult(0);\n            */\n    }\n\n    toString() {\n      return \"[\" + this.id + \", \" + this.pos.x + \", \" + this.pos.y + \"]\";\n    }\n  }","\nexport { default as hello } from \"./hello\";\nexport * from \"./shape\";\nexport * from \"./layout\";\n\nexport {MChart} from \"./MChart\";\nexport {Vector} from \"./Vector\";\n\nexport * from \"./Graph\";\n\n\nexport var version = \"0.1\"\n\n\n"],"names":["hello","name","NONE","Shape","x","y","type","isSelected","strokeStyle","color","Arc","radius","radians","dx","dy","ctx","save","beginPath","arc","fillStyle","fill","lineWidth","stroke","restore","Circle","Math","PI","width","height","Rectangle","rect","Vector","isNaN","console","warn","n","error","v1","amount","h","atan2","sqrt","magSq","div","mag","normalize","mult","v2","v","result","copy","lerp","min","max","randomIntBounds","floor","random","ForceDirected","graph","options","initNodes","DEFAULTS","GRAVITY","REPULSION","Object","assign","nodeList","forEach","node","pos","gravity","force","i","length","j","node1","node2","dir","sub","distance","force1","inverseForce","add","linkList","con","neg_force","pos_force","applyForcesTowardsCenter","applyRepulsiveForces","applyForcesExertedByConnections","InputDeviceTracker","canvas","callback","log","self","addEventListener","onDown","bind","onMove","onUp","evt","getBoundingClientRect","offsetTop","top","offsetLeft","left","touches","clientX","clientY","preventDefault","coords","getCoordinatesFromEvent","Renderer","w","fillRect","moveTo","lineTo","closePath","fillText","MChart","container","startX","startY","lastMoveX","lastMoveY","document","getElementById","getContext","window","innerWidth","innerHeight","renderer","display_grid","selection","objects","isSelecting","isDragging","clicked_on_the_canvas","object","push","draw","clearRect","drawGrid","render","bbox","getBBox","evtType","mouseIsDown","isHit","constructor","moveObjectToLastPosition","selection_startX","selection_startY","rectContainsShape","x1","y1","x2","y2","inputDeviceTracker","manageInputEvents","object_list","object_to_move","index","splice","rectangle","shape","rectContainsCircle","rectContainsRect","rect1","rect2","result_X","result_Y","circle","left_include","right_include","bottom_include","top_include","Graph","adjacency","changed","root","PI_2","Node","id","size","mass","velocity","acceleration","textAlign","textBaseline","f","force_copy","version"],"mappings":"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"}