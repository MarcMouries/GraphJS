{"version":3,"file":"graphboard.min.js","sources":["../../src/canvas/setupHiDefCanvas.js","../../src/canvas/Renderer.js","../../src/geometry/Trigo.js","../../src/geometry/Vector.js","../../src/graph/Link.js","../../src/graph/Node.js","../../src/graph/Graph.js","../../src/layout/ForceDirected.js","../../src/shape/Constants.js","../../src/shape/Shape.js","../../src/shape/Arc.js","../../src/shape/Circle.js","../../src/shape/Rectangle.js","../../src/InputDeviceTracker.js","../../src/MChart.js","../../src/index.js"],"sourcesContent":["/**\n * Create a High Definition Canvas.\n *\n * @param {*} canvas\n * @returns Scaled 2d Context\n */\nexport default function setupHiDefCanvas(canvas) {\n\t// Get the device pixel ratio, falling back to 1.\n\tvar devicePixelRatio = window.devicePixelRatio || 1;\n\n\tvar ctx = canvas.getContext(\"2d\");\n\n\tconsole.log(\"─────────────────────────\")\n\tconsole.log(\"│ setupHiDefCanvas      │\")\n\tconsole.log(\"─────────────────────────\")\n\tconsole.log(\"  devicePixelRatio : \" + devicePixelRatio)\n\tconsole.log(\"  canvas.width  : \" + canvas.width)\n\tconsole.log(\"  canvas.height : \" + canvas.height)\n\n\t// Get the size of the canvas in CSS pixels.\n\tvar rect = canvas.getBoundingClientRect();\n\tconsole.log(\"  rect.width  : \" + rect.width)\n\tconsole.log(\"  rect.height : \" + rect.height)\n\n    const initialWidth = canvas.width;\n    const initialHeight = canvas.height;\n\n\n\t// On Hi Def like Retina display we double the size of the canvas\n\tcanvas.width = initialWidth * devicePixelRatio;\n\tcanvas.height = initialHeight * devicePixelRatio;\n    ctx.scale(devicePixelRatio, devicePixelRatio);\n\n\t// and we shrink the display size using CSS\n\tcanvas.style.width = initialWidth + 'px';\n    canvas.style.height = initialHeight + 'px';\n\n\tconsole.log(\"  canvas.style.width  : \" + canvas.style.width)\n\tconsole.log(\"  canvas.style.height  : \" + canvas.style.height)\n\n\tconsole.log(\"  canvas.width  : \" + canvas.width)\n\tconsole.log(\"  canvas.height : \" + canvas.height)\n\n\tconsole.log(\" └───────────────────────┘\")\n\n\treturn ctx;\n}","\n\nexport default class Renderer {\n\n    constructor(ctx) {\n        this.ctx = ctx;\n    }\n\n    drawGrid(w, h) {\n\n        this.ctx.save()\n\n        this.ctx.fillStyle = 'white'\n        this.ctx.fillRect(0, 0, w, h)\n        this.ctx.lineWidth = 0.3;\n        this.ctx.strokeStyle = 'lightgray'\n        this.ctx.fillStyle = 'black'\n\n        for (let i = 1; i < w; i++) {\n            this.ctx.beginPath()\n            if (i % 10 === 0) {\n                this.ctx.moveTo(i, 0);\n                this.ctx.lineTo(i, h)\n                this.ctx.moveTo(i, 0);\n            }\n            this.ctx.closePath()\n            this.ctx.stroke()\n        }\n\n        for (let i = 1; i < h; i++) {\n            this.ctx.beginPath()\n            if (i % 10 === 0) {\n                this.ctx.moveTo(0, i)\n                this.ctx.lineTo(w, i)\n                this.ctx.moveTo(0, i)\n            }\n            this.ctx.closePath()\n            this.ctx.stroke()\n        }\n\n\n        this.ctx.lineWidth = 1\n        this.ctx.strokeStyle = 'gray'\n\n        this.ctx.beginPath()\n        for (let i = 50; i < w; i += 10) {\n            if (i % 50 === 0) {\n                this.ctx.moveTo(i, 0)\n                this.ctx.lineTo(i, 30)\n                this.ctx.fillText(` ${i}`, i, 30)\n            } else {\n                this.ctx.moveTo(i, 0)\n                this.ctx.lineTo(i, 10)\n            }\n\n        }\n        this.ctx.closePath()\n        this.ctx.stroke()\n\n        this.ctx.beginPath()\n        for (let i = 50; i < h; i += 10) {\n            if (i % 50 === 0) {\n                this.ctx.moveTo(0, i)\n                this.ctx.lineTo(30, i)\n                this.ctx.fillText(` ${i}`, 30, i)\n            } else {\n                this.ctx.moveTo(0, i)\n                this.ctx.lineTo(10, i)\n            }\n\n        }\n        this.ctx.closePath()\n        this.ctx.stroke()\n\n        this.ctx.restore()\n    }\n}","// =============================================================\n//                          TRIGO FUNCTIONS\n// =============================================================\nexport const TWO_PI = Math.PI * 2;\n\n/**\n * Concernt mouse (x, y) relative to the center of the circle\n */\nexport function ConvertMousePositionToCoordinateGraph(mousePos, center) {\n  return {\n    x: mousePos.x - center.x,\n    y: -1 * (mousePos.y - center.y)\n  }\n}\n\nexport function to_radians(degrees) {\n  return degrees * (Math.PI / 180);\n}\n\nexport function to_degrees(radians) {\n  return radians * (180 / Math.PI);\n}\n\nexport function distanceXY(x0, y0, x1, y1) {\n  var dx = x1 - x0;\n  var dy = y1 - y0;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function pointInCircle(point, circle) {\n  return distanceXY(point.x, point.y, circle.x, circle.y) < circle.radius;\n}\n\n/**\n * Convert from cartesian coordinates (x, y) to polar coordinates (r, θ).\n * @param {*} cx \n * @param {*} cy \n * @param {*} r \n * @param {*} angle \n * @returns \n */\nexport function getPointOnArc(cx, cy, r, angle) {\n  return {\n    x: cx + r * Math.cos(angle),\n    y: cy + r * Math.sin(angle)\n  };\n}\nexport function __getPointOnArc(point, r, angle) {\n  return {\n    x: point.x + r * Math.cos(angle),\n    y: point.y + r * Math.sin(angle)\n  };\n\n}\nexport function rotate(x, y, angle) {\n  return {\n    x: x * Math.cos(angle) - y * Math.sin(angle),\n    y: x * Math.sin(angle) + y * Math.cos(angle)\n  };\n}\n\n/*\n * Returns the angle θ between 2 points\n */\nfunction findAngle(p1, p2) {\n  var angleRAD = Math.atan2(p2.y - p1.y, p2.x - p1.x);\n  return angleRAD;\n}\n\n/**\n * Calculates the midpoint between two points [x1,y1] &  [x2,y2]\n */\nexport function midpoint(x1, y1, x2, y2) {\n  return {\n    x: (x1 + x2) / 2,\n    y: (y1 + y2) / 2\n  };\n}\n\n\n//bearing between the compass'center point and the specified point\nexport function __getBearing(point) {\n  var compass_points = [\"N\", \"NE\", \"E\", \"SE\", \"S\", \"SW\", \"W\", \"NW\", \"N\"];\n  var bearing = findAngle(\n    { x: this.cx, y: -this.cy },\n    { x: point.x, y: -point.y });\n\n    var bearingTT;\n  if (bearing < 0) {\n     bearingTT = 360 + bearing;\n   } \n   else {\n     bearingTT = bearing;\n   }\n  var compass_lookup = Math.round(bearingTT / 45);\n//  log(bearingTT + \" \" + compass_lookup + \" - \" + bearing);\n  return compass_points[compass_lookup];\n}\n\n\n\n/**\n *\n *\n *    x,y\n *    ┌────────────────────────┐ width\n *    │  x,y             width │\n *    │  ┌──────────────────┐  │\n *    │  │                  │  │\n *    │  │                  │  │\n *    │  │                  │  │\n *    │  └──────────────────┘  │\n *    │                  heigth│\n *    └────────────────────────┘ heigth\n\n * @param {*} rect1 \n * @param {*} rect2 \n * @returns \n */\nexport function rectContainsRect(rect1, rect2) {\n  console.log(\"rectContainsRect\");\n  // console.log(rect1.toStringCoordinates());\n  // console.log(rect2.toStringCoordinates());\n\n  var result_X = (rect1.getX()) < (rect2.getX()) &&\n    (rect1.getX() + rect1.getWidth()) < (rect2.getX() + rect2.getWidth());\n\n  var result_Y = (rect1.getY()) > (rect2.getY()) &&\n    (rect1.getY() + rect1.getHeight()) <= (rect2.getY() + rect2.getHeight());\n\n\n  return result_X & result_Y;\n}\n\n","/**\n *  A vector is an entity that has both magnitude and direction.\n *  2D vector implementation based on the vector functions in P5.js\n */\nexport class Vector {\n\tconstructor(x, y) {\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\n\t\tif (isNaN(x) || isNaN(y)) {\n\t\t\tconsole.warn(`Vector(): parameters are not number: (${x}), ${y} `);\n\t\t}\n\t\t/*\n\t\tconsole.log(\"in Vector()\");\n\t\tconsole.log(\"this.x  = \" + this.x);\n\t\tconsole.log(\"this.y  = \" + this.y);\n\n\t\tconsole.log(\"typeof x  = \" + typeof y);\n\t\tconsole.log(\"typeof y  = \" + typeof y);\n\t\t*/\n\t}\n\n\tstatic add(v1, v2) {\n\t\treturn new Vector(v1.x + v2.x, v1.y + v2.y);\n\t}\n\n\t/**\n\t * Divides a vector by a scalar and returns a new vector.\n\t *\n\t * @method div\n\t * @static\n\t * @param  {Vector} v\n\t * @param  {Number}  n\n\t * @return  {Vector}\n\t */\n\tstatic div(v, n) {\n\t\tlet result = v.copy();\n\t\treturn result.div(n);\n\t}\n\n\t/**\n\t * Linear interpolate the vector to another vector\n\t */\n\tstatic lerp(v1, v2, amount) {\n\t\tlet result = v1.copy();\n\t\treturn result.lerp(v2, amount);\n\t}\n\n\tstatic random(min, max) {\n\t\tlet x = randomIntBounds(min, max);\n\t\tlet y = randomIntBounds(min, max);\n\t\treturn new Vector(x, y);\n\t}\n\n\tstatic sub(v1, v2) {\n\t\treturn new Vector(v1.x - v2.x, v1.y - v2.y);\n\t}\n\n\t/**\n\t * Supports adding a Vector or a Scalar\n\t * @param {*} n\n\t * @returns\n\t */\n\tadd(n) {\n\t\tif (n instanceof Vector) {\n\t\t\tthis.x += n.x;\n\t\t\tthis.y += n.y;\n\t\t\treturn this;\n\t\t} else if (typeof n === \"number\") {\n\t\t\tthis.x += n;\n\t\t\tthis.y += n;\n\t\t\treturn this;\n\t\t} else {\n\t\t\tconsole.error(`Parameter in Vector.add(n) Not supported: ${n})`);\n\t\t}\n\t}\n\n\t/**\n\t *  Return a new vector\n\t * @returns\n\t */\n\tcopy() {\n\t\treturn new Vector(this.x, this.y);\n\t}\n\n\t/* divide vector length (ie magnitude) by a constant*/\n\tdiv(n) {\n\t\tif (n === 0) {\n\t\t\t//console.warn(\"Vector.div:\", \"divide by 0\");\n\t\t\treturn this;\n\t\t}\n\t\tthis.x /= n;\n\t\tthis.y /= n;\n\t\treturn this;\n\t}\n\n\tlerp(v1, amount) {\n\t\tthis.x += (v1.x - this.x) * amount || 0;\n\t\tthis.y += (v1.y - this.y) * amount || 0;\n\t\treturn this;\n\t}\n\n\theading() {\n\t\tconst h = Math.atan2(this.y, this.x);\n\t\treturn h;\n\t}\n\n\tmagSq() {\n\t\tconst x = this.x;\n\t\tconst y = this.y;\n\t\treturn x * x + y * y;\n\t}\n\n\tmag() {\n\t\treturn Math.sqrt(this.magSq());\n\t}\n\n\tnormalize() {\n\t\treturn this.div(this.mag());\n\t}\n\n\t/**\n\tMultiply vector length (ie magnitude) by a constant\n\t*/\n\tmult(n) {\n\t\tthis.x *= n;\n\t\tthis.y *= n;\n\t\treturn this;\n\t}\n\n\t/**\n\t *  set magnitude to a given value\n\t */\n\tsetMag(n) {\n\t\treturn this.normalize().mult(n);\n\t}\n\n\n\t/**\n\t * \n\t * @param {*} n \n\t * @returns \n\t */\n\tsub(n) {\n\t\tif (n instanceof Vector) {\n\t\t\tthis.x -= n.x;\n\t\t\tthis.y -= n.y;\n\t\t\treturn this;\n\t\t} else if (typeof n === \"number\") {\n\t\t\tthis.x -= n;\n\t\t\tthis.y -= n;\n\t\t\treturn this;\n\t\t} else {\n\t\t\tconsole.error(`Parameter in Vector.sub(n) Not supported: ${n})`);\n\t\t}\n\t}\n\n\ttoString() {\n\t\treturn \"[\" + this.x + \", \" + this.y + \"]\";\n\t}\n}\n\n/* Return a random integer between min and max (inclusive) */\nfunction randomIntBounds(min, max) {\n\treturn Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport default Vector;\n","export default class Link {\n\tconstructor(source, target) {\n\t\tif (source.id && target.id) {\n\t\t\tthis.id = source.id + \" → \" + target.id;\n\t\t} else {\n\t\t\tthis.id = source + \" → \" + target;\n\t\t}\n\t\tthis.source = source;\n\t\tthis.target = target;\n\t}\n}\n","import Vector from \"../geometry/Vector\";\n\n\nexport default class Node {\n\tconstructor(id, data) {\n\t\tthis.id = id;\n\n\t\tthis.data = data;\n\t\tthis.level = 0;\n\t\tthis.children = [];\n\t\tthis.parent;\n\t\tthis.neighbor;\n\t\tthis.isCollapsed = false;\n\n\t\tthis.size = 20;\n\t\tthis.mass = 13; //(6 * this.size) / 1.5;\n\t\tthis.radius = this.size;\n\n\t\tthis.pos = new Vector(0, 0);\n\t\tthis.velocity = new Vector(0, 0);\n\t\tthis.acceleration = new Vector(0, 0);\n\t}\n\n\ttoString() {\n\t\treturn \"Node \" + this.id + \"(\" + this.pos.x + \", \" + this.pos.y + \")\";\n\t}\n\n\taddChild(node) {\n\t\tthis.children.push(node);\n\t}\n\n\tgetAdjacents() {\n\t\treturn this.children;\n\t}\n\n\tisAdjacent(node) {\n\t\treturn this.children.indexOf(node) > -1;\n\t}\n\n\tgetChildAt(i) {\n\t\treturn this.children[i];\n\t}\n\n\tgetFirstChild() {\n\t\treturn this.getChildAt(0);\n\t}\n\n\tgetChildrenCount() {\n\t\treturn this.children.length;\n\t}\n\tisLeaf() {\n\t\treturn this.children && this.children.length == 0;\n\t}\n\thasChild() {\n\t\treturn this.children && this.children.length > 0;\n\t}\n\tgetLastChild() {\n\t\treturn this.getChildAt(this.getChildrenCount() - 1);\n\t}\n\tisAncestorCollapsed() {\n\t\tif (this.parent == null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.parent.isCollapsed\n\t\t\t? true\n\t\t\t: this.parent.id === -1\n\t\t\t? false\n\t\t\t: this.parent.isAncestorCollapsed();\n\t}\n\n\t/**\n\t *  isLeftMost: is this node == to the first child of its parent?\n\t */\n\tisLeftMost() {\n\t\tif (!this.parent || this.parent === null) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn this.parent.getFirstChild() === this;\n\t\t}\n\t}\n\n\t/**\n\t *  isRightMost: is this node == to the last child of its parent?\n\t */\n\tisRightMost() {\n\t\tif (!this.parent || this.parent === null) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn this.parent.getLastChild() === this;\n\t\t}\n\t}\n\n\tgetLeftSibling() {\n\t\tif (this.parent === null || this.isLeftMost()) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tvar index = this.parent.children.indexOf(this);\n\t\t\treturn this.parent.children[index - 1];\n\t\t}\n\t}\n\n\tgetRightSibling() {\n\t\tif (this.parent === null || this.isRightMost()) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tvar index = this.parent.children.indexOf(this);\n\t\t\treturn this.parent.children[index + 1];\n\t\t}\n\t}\n\n\tgetLeftMostChild() {\n\t\tif (this.getChildrenCount() == 0) return null;\n\n\t\treturn this.children[0];\n\t}\n\n\tgetRightMostChild() {\n\t\tif (this.getChildrenCount() == 0) return null;\n\n\t\treturn this.children[this.getChildrenCount() - 1];\n\t}\n\n\thasLeftSibling() {\n\t\treturn !this.isLeftMost();\n\t}\n}\n","// =============================================================\n//                          Graph\n// =============================================================\nimport Link from \"./Link\";\nimport Node from \"./Node\";\n\nexport default class Graph {\n\tconstructor() {\n\t\tthis.graph = {};\n\t\tthis.nodeList = [];\n\t\tthis.linkList = [];\n\t\tthis.adjacency = {};\n\t\tthis.changed = false;\n\t\tthis.root;\n\t}\n\n\t/**\n\t * Add a node\n\t * @param {*} node\n\t * @returns\n\t */\n\taddNode(node) {\n\t\tif (!(node.id in this.graph)) {\n\t\t\tthis.nodeList.push(node);\n\t\t\tthis.graph[node.id] = node;\n\t\t} else {\n\t\t\tconsole.log(\"Node already exists: \" + node.id);\n\t\t}\n\t\treturn node;\n\t}\n\tgetNode(nodeID) {\n\t\tvar node = this.graph[nodeID];\n\t\treturn node;\n\t}\n\n\tnodeAt (index) {\n\t\tvar node = this.nodeList[index];\n\t\treturn node;\n\t}\n\n\t/**\n\t *  Add an object. Create a node from the specified object\n\t * @param {*} object\n\t * @returns\n\t */\n\taddObject(object) {\n\t\tvar node = new Node(object.id, object);\n\n\t\tif (object.parentId) {\n\t\t\tnode.parent = this.getNode(object.parentId);\n\t\t\tif (!node.parent) {\n\t\t\t\tconsole.error(\n\t\t\t\t\t\"Parent node not found for parentId: \" + object.parentId\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tnode.level = node.parent.level + 1;\n\t\t\t\tnode.parent.children.push(node);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.root = node;\n\t\t}\n\t\tthis.addNode(node);\n\t\tthis.changed = true;\n\t\treturn node;\n\t}\n\n\tgetLinkCount() {\n\t\treturn this.linkList.length;\n\t}\n\tgetNodeCount() {\n\t\treturn this.nodeList.length;\n\t}\n\n\taddLink(sourceNode_id, targetNode_id) {\n\t\tvar sourceNode = this.getNode(sourceNode_id);\n\t\tif (sourceNode == undefined) {\n\t\t\tthrow new TypeError(\n\t\t\t\t\"Trying to add a link to the non-existent node with id: \" +\n\t\t\t\t\tsourceNode_id\n\t\t\t);\n\t\t}\n\t\tvar targetNode = this.getNode(targetNode_id);\n\t\tif (targetNode == undefined) {\n\t\t\tthrow new TypeError(\n\t\t\t\t\"Trying to add a link to the non-existent node with id: \" +\n\t\t\t\t\ttargetNode_id\n\t\t\t);\n\t\t}\n\n\t\tvar link = new Link(sourceNode, targetNode);\n\t\tvar exists = false;\n\n\t\tthis.linkList.forEach(function (item) {\n\t\t\tif (link.id === item.id) {\n\t\t\t\texists = true;\n\t\t\t}\n\t\t});\n\n\t\tif (!exists) {\n\t\t\tthis.linkList.push(link);\n\t\t\tsourceNode.addChild(targetNode);\n\t\t} else {\n\t\t\tconsole.log(\n\t\t\t\t\"LINK EXIST: \" +\n\t\t\t\t\t\" source: \" +\n\t\t\t\t\tlink.source.id +\n\t\t\t\t\t\" => \" +\n\t\t\t\t\tlink.target.id\n\t\t\t);\n\t\t}\n\n\t\tif (!(link.source.id in this.adjacency)) {\n\t\t\tthis.adjacency[link.source.id] = {};\n\t\t}\n\t\tif (!(link.target.id in this.adjacency[link.source.id])) {\n\t\t\tthis.adjacency[link.source.id][link.target.id] = [];\n\t\t}\n\t\tthis.adjacency[link.source.id][link.target.id].push(link);\n\t}\n\n\tloadJSON(json_string) {\n\t\tvar json_object = JSON.parse(json_string);\n\t\tvar nodes = json_object[\"nodes\"];\n\t\tfor (let index = 0; index < nodes.length; index++) {\n\t\t\tvar node = nodes[index];\n\t\t\tthis.addObject(node);\n\t\t}\n\n\t\tvar links = json_object[\"links\"];\n\t\tif (links) {\n\t\t\tfor (let index = 0; index < links.length; index++) {\n\t\t\t\tvar link = links[index];\n\t\t\t\tthis.addLink(link.source, link.target);\n\t\t\t}\n\t\t}\n\t\tconsole.log(\"Graph.loadJSON \");\n\t\tconsole.log(this.graph);\n\t}\n\ttoString() {\n\t\treturn this.nodeList.map(printNode);\n\t}\n}\n\nfunction printNode(node) {\n\tvar adjacentsRepresentation = \"\";\n\tif (node.getAdjacents() == 0) {\n\t\tadjacentsRepresentation = \"no children\";\n\t} else {\n\t\tadjacentsRepresentation = node\n\t\t\t.getAdjacents()\n\t\t\t.map(function (item) {\n\t\t\t\treturn item.id;\n\t\t\t})\n\t\t\t.join(\", \");\n\t}\n\treturn node.id + \" => \" + adjacentsRepresentation;\n}\n","// =============================================================\n// Force Directed Layout\n// =============================================================\nimport Vector from \"../geometry/Vector\";\n\nexport default class ForceDirected {\n\tconstructor(graph, options) {\n\t\tthis.graph = graph;\n\t\tthis.initNodes();\n\n\t\tconst DEFAULTS = {\n\t\t\tGRAVITY: 0.9,\n\t\t\tREPULSION: 500000,\n\t\t};\n\t\tthis.options = Object.assign({}, DEFAULTS, options);\n\t}\n\n\tinitNodes() {\n\t\tlet min = -1000;\n\t\tlet max = 1000;\n\n\t\tthis.graph.nodeList.forEach((node) => {\n\t\t\tnode.pos = new Vector.random(min, max);\n\t\t});\n\t}\n\n\trun() {\n\t\t//requestAnimationFrame(this.animate);\n\t\tconsole.log(\"run\");\n\t}\n\n\tanimate = () => {\n\t\tconsole.log(\"animate\");\n\t};\n\n\t/**\n\t *  applyForce\n\t *\n\t *  Newton’s second law.\n\t *  Receive a force, divide by mass, and add to acceleration.\n\t */\n\tapplyForce(node, force) {\n\t\tlet forceOverMass = Vector.div(force, node.mass);\n\t\tnode.acceleration.add(forceOverMass);\n\t}\n\n\tupdateNodesVelocity() {\n\t\tthis.graph.nodeList.forEach((node) => {\n\t\t\tlet force_copy = node.acceleration.copy();\n\t\t\tlet forceOverMass = force_copy.div(node.mass);\n\t\t\t//\tnode.velocity.add( forceOverMass );\n\t\t\tnode.pos.add(forceOverMass);\n\n\t\t\t//\tnode.velocity.add(node.acceleration);\n\t\t\t//\tnode.pos.add(node.velocity);\n\t\t\t//\tnode.acceleration.mult(0);\n\t\t});\n\t}\n\n\tapplyForcesTowardsCenter() {\n\t\t// apply force towards center\n\t\tthis.graph.nodeList.forEach((node) => {\n\t\t\tlet gravity = node.pos.copy().mult(-1).mult(this.options.GRAVITY);\n\t\t\tnode.acceleration = gravity;\n\t\t\t//node.applyForce(gravity);\n\t\t\t//console.log(node);\n\t\t});\n\t}\n\n\tapplyRepulsiveForces() {\n\t\t// apply repulsive force between nodes\n\t\tfor (let i = 0; i < this.graph.nodeList.length; i++) {\n\t\t\tfor (let j = i + 1; j < this.graph.nodeList.length; j++) {\n\t\t\t\tif (i != j) {\n\t\t\t\t\tlet node1 = this.graph.nodeList[i];\n\t\t\t\t\tlet node2 = this.graph.nodeList[j];\n\t\t\t\t\t//console.log(\"applyRepulsiveForces\");\n\t\t\t\t\t//console.log(node1);\n\t\t\t\t\t//console.log(node2);\n\n\t\t\t\t\t// The gravitational force F between two bodies of mass m1 and m2 is\n\t\t\t\t\t// F = G*m1*m2 / r2\n\t\t\t\t\t// the vector that points from one object to the other\n\t\t\t\t\tlet dir = Vector.sub(node2.pos, node1.pos);\n\t\t\t\t\t// let unit = dir.copy().normalize()\n\n\t\t\t\t\t// the length (magnitude) of that vector is the distance between the two objects.\n\t\t\t\t\tlet distance = dir.mag();\n\n\t\t\t\t\t// The strength of the force is inversely proportional to the distance squared.\n\t\t\t\t\t// The farther away an object is, the weaker the force; the closer, the stronger.\n\t\t\t\t\t// original  : without the normalize\n\t\t\t\t\tdir.normalize();\n\n\t\t\t\t\tlet force1 = dir.mult(this.options.REPULSION);\n\t\t\t\t\tforce1.div(distance * distance);\n\n\t\t\t\t\tlet inverseForce = force1.copy().mult(-1);\n\t\t\t\t\tnode2.acceleration.add(force1);\n\t\t\t\t\tnode1.acceleration.add(inverseForce);\n\n\t\t\t\t\t//node2.applyForce(force1);\n\t\t\t\t\t//node1.applyForce(inverseForce);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tapplyForcesExertedByConnections() {\n\t\tthis.graph.linkList.forEach((link) => {\n\t\t\tlet node1 = link.source;\n\t\t\tlet node2 = link.target;\n\n\t\t\t//let maxDis = con[2];\n\t\t\t//let connector_length = 100;\n\n\t\t\tlet dir = Vector.sub(node1.pos, node2.pos);\n\n\t\t\tlet neg_force = new Vector(0, 0).sub(dir);\n\t\t\tlet pos_force = new Vector(0, 0).add(dir);\n\n\t\t\tnode1.acceleration.add(neg_force);\n\t\t\tnode2.acceleration.add(pos_force);\n\n\t\t\t//node1.applyForce(neg_force);\n\t\t\t//node2.applyForce(pos_force);\n\t\t});\n\t}\n\n\tapplyForces() {\n\t\t// Force equals mass times acceleration.\n\t\t// Newton’s second law, F→=M×A→ (or force = mass * acceleration).\n\t\tthis.applyForcesTowardsCenter();\n\n\t\tthis.applyRepulsiveForces();\n\n\t\tthis.applyForcesExertedByConnections();\n\n\t\tthis.updateNodesVelocity();\n\n\t\t// kinetic energy (KE) is equal to half of an object's mass (1/2*m) multiplied by the velocity squared.\n\t\t/*\n\t\tlet total_KE = 0.0;\n\t\tthis.graph.nodeList.forEach((node) => {\n\t\t\tlet velocity = node.velocity.mag();\n\n\t\t\tlet node_KE = 0.5 * node.mass * (velocity * velocity);\n\t\t\ttotal_KE = + node_KE;\n\n\t\t});\n\t\tconsole.warn(\"total_KE= \" + total_KE);\n\t\t*/\n\t}\n}\n","\n\nexport var NONE = \"none\";\nexport var pi = Math.PI;\n","import {NONE} from './Constants.js';\n\nexport default class Shape {\n    constructor(x, y, type) {\n        this.type = type;\n        this.x = x;\n        this.y = y;\n        this.isSelected = false;\n        this.strokeStyle = NONE;\n\n    }\n    getColor() {\n        return this.color;\n    }\n}","import Shape from './Shape.js';\nimport { NONE } from './Constants.js';\n\nexport default class Arc extends Shape {\n  constructor(x, y, radius, radians) {\n    super(x, y);\n    this.radius = radius;\n    this.radians = radians;\n  }\n  isHit(x, y) {\n    var dx = this.x - x;\n    var dy = this.y - y;\n    if (dx * dx + dy * dy < this.radius * this.radius) {\n      return true;\n    }\n  }\n  render(ctx) {\n    ctx.save();\n\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, this.radians, false);\n\n    if (this.fillStyle) {\n      ctx.fillStyle = this.fillStyle;\n      ctx.fill();\n    }\n\n    if (this.strokeStyle != NONE) {\n      ctx.strokeStyle = this.strokeStyle;\n      ctx.lineWidth = this.lineWidth;\n      ctx.stroke();\n    }\n\n    ctx.restore();\n  }\n}","import Arc from './Arc.js';\n\n\nexport default class Circle extends Arc {\n    constructor(x, y, radius) {\n      super(x, y, radius, Math.PI *2);\n    }\n    isHit(x, y) {\n      var dx = this.x - x;\n      var dy = this.y - y;\n      if (dx * dx + dy * dy < this.radius * this.radius) {\n        return true;\n      }\n    }\n\n    getBBox() {\n      return {\n        x: this.x - this.radius,\n        y: this.y - this.radius,\n        width : this.radius * 2,\n        height : this.radius * 2\n      }\n    }\n  }","import Shape from './Shape.js';\nimport { NONE } from './Constants.js';\n\n\nexport default class Rectangle extends Shape {\n    constructor(x, y, width, height) {\n        super(x, y);\n        this.width = width;\n        this.height = height;\n    }\n    getArea() {\n        return this.width * this.height;\n    }\n\n    isHit(x, y) {\n        if (\n            x > this.x &&\n            x < this.x + this.width &&\n            y > this.y &&\n            y < this.y + this.height\n        ) {\n            return true;\n        }\n    }\n    render(ctx) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(\n            this.x,\n            this.y,\n            this.width,\n            this.height\n        );\n\n        if (this.fillStyle) {\n            ctx.fillStyle = this.fillStyle;\n            ctx.fill();\n        }\n        if (this.strokeStyle != NONE) {\n            ctx.strokeStyle = this.strokeStyle;\n            ctx.lineWidth = this.lineWidth;\n            ctx.stroke();\n        }\n        ctx.restore();\n    }\n    toString() {\n        return `rectangle:  (${this.x},${this.y}) x (${this.width},${this.height})`;\n    }\n}","export default class InputDeviceTracker {\n\n    constructor(canvas, callback) {\n        console.log(\"InputDeviceTracker ()\");\n\n        this.canvas = canvas;\n        this.callback = callback;\n\n        console.log(\"constructor this\");\n        console.log(this);\n\n        this.canvas.addEventListener('mousedown', this.onDown.bind(this));\n        this.canvas.addEventListener('mousemove', this.onMove.bind(this));\n        this.canvas.addEventListener('mouseup', this.onUp.bind(this));\n\n        this.canvas.addEventListener('touchstart', this.onDown.bind(this));\n        this.canvas.addEventListener('touchmove', this.onMove.bind(this));\n        this.canvas.addEventListener('touchend', this.onUp.bind(this));\n    }\n\n    getCoordinatesFromEvent(evt) {\n        var rect = self.canvas.getBoundingClientRect();\n        var offsetTop = rect.top;\n        var offsetLeft = rect.left;\n\n        if (evt.touches) {\n            return {\n                x: evt.touches[0].clientX - offsetLeft,\n                y: evt.touches[0].clientY - offsetTop\n            };\n        } else {\n            return {\n                x: evt.clientX - offsetLeft,\n                y: evt.clientY - offsetTop\n            };\n        }\n    }\n\n    onDown(evt) {\n        evt.preventDefault();\n        var coords = this.getCoordinatesFromEvent(evt);\n        this.callback(\"down\", coords.x, coords.y);\n    }\n\n    onUp(evt) {\n        evt.preventDefault();\n        this.callback(\"up\");\n    }\n\n    onMove(evt) {\n        evt.preventDefault();\n        var coords = this.getCoordinatesFromEvent(evt);\n        this.callback(\"move\", coords.x, coords.y);\n    }\n}","import InputDeviceTracker from './InputDeviceTracker'\nimport { Rectangle, Circle } from './shape';\nimport { Renderer,  setupHiDefCanvas} from './canvas';\n\nexport class MChart {\n\n  constructor(container, options) {\n    console.log(\"MChart container()\");\n    console.log(container);\n    this.container = container;\n    this.startX = 0, this.startY = 0;\n    this.lastMoveX = 0, this.lastMoveY = 0;\n\n    this.canvas = document.getElementById(\"canvas\");\n    //this.ctx = this.canvas.getContext(\"2d\");\n    this.ctx = setupHiDefCanvas(this.canvas);\n\n\n    this.cw = this.canvas.width;\n    this.ch = this.canvas.height;\n\n    this.renderer = new Renderer(this.ctx);\n    this.inputDeviceTracker = new InputDeviceTracker(this.canvas, this.manageInputEvents.bind(this));\n\n\n    const DEFAULTS = {\n      display_grid: false,\n      selection: {\n        strokeStyle: '#CC0000', //  'rgba(255,51,0,1)', //'rgba(0,128,255,1)';\n        lineWidth: 5.5,\n        fillStyle: 'rgba(255,51,0,0.05)'  //'rgba(0,128,255, 0.2)';\n      }\n    }\n    this.options = Object.assign({}, DEFAULTS, options);\n\n    /* The selection rectangle */\n    this.selection = new Rectangle(100, 100, 100, 100);\n    this.selection.strokeStyle = this.options.selection.strokeStyle;\n    this.selection.fillStyle = this.options.selection.fillStyle;\n    this.selection.lineWidth = this.options.selection.lineWidth;\n\n    /* The list of ojbects to draw */\n    this.objects = [];\n\n    this.isSelecting = false;\n    this.isDragging = false;\n    this.clicked_on_the_canvas = false;\n  }\n\n  dump() {\n    console.log(\"MChart container= \");\n    console.log(\"- objects= \");\n    console.log(this.objects);\n  }\n\n  addObject(object) {\n    this.objects.push(object);\n    //this.draw();\n  }\n\n  /**\n   *  Private function to render one frame. It is being called by render()\n   */\n  //renderFrame = () => {\n    renderFrame() {\n\n   // console.log(\"renderFrame\")\n    this.ctx.clearRect(0, 0, this.cw, this.ch);\n\n    if (this.options.display_grid) {\n      this.renderer.drawGrid(this.cw, this.ch);\n    }\n\n    this.objects.forEach((object) => {\n      object.render(this.ctx);\n      if (object.isSelected) {\n        var selection;\n        if (object instanceof Circle) {\n          var bbox = object.getBBox();\n          selection = new Rectangle(bbox.x, bbox.y, bbox.width, bbox.height);\n        }\n        else {\n          selection = new Rectangle(object.x, object.y, object.width, object.height);\n        }\n        selection.strokeStyle = this.options.selection.strokeStyle;\n        selection.lineWidth = this.options.selection.lineWidth;\n        selection.render(this.ctx);\n        console.log(\"selection rectangle\");\n        console.log(selection);\n      }\n\n      if (this.isSelecting == true) {\n        this.selection.render(this.ctx);\n      }\n    })\n  }\n\n  render() {\n      this.renderFrame();\n\n      window.requestAnimationFrame(this.render.bind(this, this.canvas));\n\n  }\n\n\n  manageInputEvents(evtType, x, y) {\n    switch (evtType) {\n      case \"down\":\n        this.mouseIsDown = true;\n\n        this.startX = x;\n        this.startY = y;\n        this.lastMoveX = x;\n        this.lastMoveY = y;\n\n        /* we assume the user clicked on the canvas unless we find an object was hit */\n        this.clicked_on_the_canvas = true;\n\n        // we start from last to check the shape that is on top first\n        for (var i = this.objects.length - 1; i >= 0; i--) {\n          var object = this.objects[i];\n          //    console.log (\"checking for hit object = \" + object.color);\n          if (object.isHit(x, y)) {\n            object.isSelected = true;\n            console.log(\"Clicked on : \" + object.constructor.name + \"/\" + object.fillStyle);\n            moveObjectToLastPosition(this.objects, object);\n            this.clicked_on_the_canvas = false;\n            this.isSelecting = false;\n            this.isDragging = true;\n          }\n\n        }\n        console.log(\"clicked on the canvas = \" + this.clicked_on_the_canvas);\n\n        if (this.clicked_on_the_canvas) {\n          console.log(\"clicked on the canvas\");\n          this.selection_startX = x;\n          this.selection_startY = y;\n\n          /* reset selection if user clicked on the canvas */\n          this.objects.forEach((object) => {\n            console.log(\"RESET object \" + object.fillStyle + \" is Circle ? \" + (object instanceof Circle));\n            object.isSelected = false;\n          });\n        }\n        break;\n\n      case \"up\":\n        this.mouseIsDown = false;\n        console.log(\"MOUSE UP\");\n        console.log(\" isDragging : \" + this.isDragging);\n        console.log(\" isSelecting : \" + this.isSelecting);\n\n        if (this.isSelecting) {\n\n\n\n          console.log(\" selection : \" + this.selection);\n          /* check if selection includes any object */\n          this.objects.forEach((object) => {\n\n            if (rectContainsShape(this.selection, object)) {\n              object.isSelected = true;\n              console.log(\"object is selected: \" + object.constructor.name + \"/\" + object.fillStyle);\n            }\n          });\n        }\n\n\n        this.isSelecting = false;\n        this.isDragging = false;\n        break;\n\n      case \"move\":\n        if (this.clicked_on_the_canvas && this.mouseIsDown) {\n          this.isSelecting = true;\n          // getting the min & max to handle when the user selects from bottom right to top left \n          const x1 = Math.min(this.selection_startX, this.lastMoveX);\n          const y1 = Math.min(this.selection_startY, this.lastMoveY);\n          const x2 = Math.max(this.selection_startX, this.lastMoveX);\n          const y2 = Math.max(this.selection_startY, this.lastMoveY);\n\n          this.selection.x = Math.floor(x1);\n          this.selection.y = Math.floor(y1);\n          this.selection.width = Math.floor(x2 - x1);\n          this.selection.height = Math.floor(y2 - y1);\n        }\n        this.lastMoveX = x;\n        this.lastMoveY = y;\n\n        var dx = x - this.startX;\n        var dy = y - this.startY;\n\n        this.startX = x;\n        this.startY = y;\n\n        if (this.isDragging) {\n          this.objects.forEach((object) => {\n            if (object.isSelected) {\n              object.x += dx;\n              object.y += dy;\n            }\n          });\n        }\n        break;\n    }\n   // this.draw();\n  }\n\n  init() {\n    this.inputDeviceTracker = new InputDeviceTracker(this.canvas, this.manageInputEvents.bind(this));\n  }\n}\n\n/**\n *  We move the node selection to the last position so that it is drawn above the other shapes on the canvas\n */\nfunction moveObjectToLastPosition(object_list, object_to_move) {\n  object_list.forEach(function (object, index) {\n    if (object === object_to_move) {\n      object_list.splice(index, 1);\n      object_list.push(object_to_move);\n      return;\n    }\n  });\n}\n\n\n\nfunction rectContainsShape(rectangle, shape) {\n\n  if (shape.constructor.name == \"Circle\") {\n    return rectContainsCircle(rectangle, shape);\n  }\n  else if (shape.constructor.name == \"Rectangle\") {\n    return rectContainsRect(rectangle, shape);\n  }\n  else {\n    console.error(\"rectContainsShape: shape is unknown: \" + shape);\n  }\n}\n\nfunction rectContainsRect(rect1, rect2) {\n\n  var result_X = (rect1.x) < (rect2.x) &&\n    (rect1.x + rect1.width) > (rect2.x + rect2.width);\n\n  var result_Y = (rect1.y) < (rect2.y) &&\n    (rect1.y + rect1.height) > (rect2.y + rect2.height);\n\n  return result_X & result_Y;\n}\n\nfunction rectContainsCircle(rectangle, circle) {\n\n  // LEFT \n  var left_include = rectangle.x < circle.x - circle.radius;\n  if (!left_include) {\n    //circle is outside of the rectangle on the left side\n    return false;\n  }\n  // RIGHT \n  var right_include = rectangle.x + rectangle.width > circle.x + circle.radius;\n  if (!right_include) {\n    //circle is outside of the rectangle on the right side\n    return false;\n  }\n  // BOTTOM \n  var bottom_include = rectangle.y + rectangle.height > circle.y + circle.radius;\n  if (!bottom_include) {\n    //circle is outside of the rectangle on the bottom side\n    return false;\n  }\n  // TOP: \n  var top_include = rectangle.y < circle.y - circle.radius;\n  if (!top_include) {\n    //circle is outside of the rectangle on the top side\n    return false;\n  }\n  return true;\n}","\nexport * from \"./canvas\";\nexport * from \"./geometry\";\nexport * from \"./graph\";\nexport * from \"./layout\";\nexport * from \"./shape\";\n\nexport {MChart} from \"./MChart\";\n\nexport var version = \"0.1\"\n\n\n"],"names":["setupHiDefCanvas","canvas","devicePixelRatio","window","ctx","getContext","console","log","width","height","rect","getBoundingClientRect","initialWidth","initialHeight","scale","style","Renderer","w","h","save","fillStyle","fillRect","lineWidth","strokeStyle","i","beginPath","moveTo","lineTo","closePath","stroke","fillText","restore","to_radians","degrees","Math","PI","Vector","x","y","isNaN","warn","n","error","v1","amount","atan2","sqrt","magSq","div","mag","normalize","mult","v2","v","result","copy","lerp","min","max","randomIntBounds","floor","random","Link","source","target","id","Node","data","level","children","parent","neighbor","isCollapsed","size","mass","radius","pos","velocity","acceleration","node","push","indexOf","getChildAt","length","getChildrenCount","isAncestorCollapsed","getFirstChild","getLastChild","isLeftMost","index","isRightMost","Graph","graph","nodeList","linkList","adjacency","changed","root","nodeID","object","parentId","getNode","addNode","sourceNode_id","targetNode_id","sourceNode","undefined","TypeError","targetNode","link","exists","forEach","item","addChild","json_string","json_object","JSON","parse","nodes","addObject","links","addLink","map","printNode","adjacentsRepresentation","getAdjacents","join","ForceDirected","options","initNodes","DEFAULTS","GRAVITY","REPULSION","Object","assign","force","forceOverMass","add","force_copy","gravity","j","node1","node2","dir","sub","distance","force1","inverseForce","neg_force","pos_force","applyForcesTowardsCenter","applyRepulsiveForces","applyForcesExertedByConnections","updateNodesVelocity","NONE","Shape","type","isSelected","color","Arc","radians","dx","dy","arc","fill","Circle","Rectangle","InputDeviceTracker","callback","addEventListener","onDown","bind","onMove","onUp","evt","self","offsetTop","top","offsetLeft","left","touches","clientX","clientY","preventDefault","coords","getCoordinatesFromEvent","MChart","container","startX","startY","lastMoveX","lastMoveY","document","getElementById","cw","ch","renderer","inputDeviceTracker","manageInputEvents","display_grid","selection","objects","isSelecting","isDragging","clicked_on_the_canvas","clearRect","drawGrid","render","bbox","getBBox","renderFrame","requestAnimationFrame","evtType","mouseIsDown","isHit","constructor","name","moveObjectToLastPosition","selection_startX","selection_startY","rectContainsShape","x1","y1","x2","y2","object_list","object_to_move","splice","rectangle","shape","rectContainsCircle","rectContainsRect","rect1","rect2","result_X","result_Y","circle","left_include","right_include","bottom_include","top_include","version"],"mappings":"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"}